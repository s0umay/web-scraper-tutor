{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13631618", "self": "https://issues.apache.org/jira/rest/api/2/issue/13631618", "key": "HIVE-29271", "fields": {"fixVersions": [], "resolution": null, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "labels": [], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": null, "customfield_12312330": null, "versions": [], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [], "customfield_12312339": null, "customfield_12313825": null, "assignee": null, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}, "components": [{"self": "https://issues.apache.org/jira/rest/api/2/component/12325007", "id": "12325007", "name": "Hive"}, {"self": "https://issues.apache.org/jira/rest/api/2/component/12320408", "id": "12320408", "name": "HiveServer2", "description": "Tracks issues related to HiveServer2"}], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": null, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=tarak271", "name": "tarak271", "key": "tarak271", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34053", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34053", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34053", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34053"}, "displayName": "Taraka Rama Rao Lethavadla", "active": true, "timeZone": "Asia/Kolkata"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=tarak271", "name": "tarak271", "key": "tarak271", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34053", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34053", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34053", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34053"}, "displayName": "Taraka Rama Rao Lethavadla", "active": true, "timeZone": "Asia/Kolkata"}, "aggregateprogress": {"progress": 0, "total": 0}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 0, "total": 0}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-29271/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 0, "worklogs": []}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/4", "id": "4", "description": "An improvement or enhancement to an existing feature or task.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype", "name": "Improvement", "subtask": false, "avatarId": 21140}, "timespent": null, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@14e76ec[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3174b11[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@49c3fbd0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@70357e3a[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5c0f09b7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@27265bfe[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@716d39b1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@2af25d08[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@e14ab50[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1bf8e8c7[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@340eab8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3be2fdc5[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12310843", "id": "12310843", "key": "HIVE", "name": "Hive", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292", "id": "10292", "description": "Scalable Distributed Computing", "name": "Hadoop"}}, "aggregatetimespent": null, "customfield_12312520": null, "customfield_12312521": "2025-10-15 13:04:28.0", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": null, "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-29271/watchers", "watchCount": 1, "isWatching": false}, "created": "2025-10-15T13:04:28.000+0000", "customfield_12310192": null, "customfield_12310191": null, "customfield_12310230": null, "updated": "2025-10-15T13:04:28.000+0000", "timeoriginalestimate": null, "description": "*Scenario:*\r\n\r\nThere are large number of corrupted files scattered across multiple partitions. They were created by some external tools. Now when we query the table, exceptions like below are thrown\r\n{noformat}\r\nCaused by: com.google.protobuf.InvalidProtocolBufferException: Protocol message contained an invalid tag (zero).\r\n    at com.google.protobuf.InvalidProtocolBufferException.invalidTag(InvalidProtocolBufferException.java:89)\r\n    at com.google.protobuf.CodedInputStream.readTag(CodedInputStream.java:108)\r\n    at org.apache.orc.OrcProto$PostScript.<init>(OrcProto.java:30246)\r\n    at org.apache.orc.OrcProto$PostScript.<init>(OrcProto.java:30210)\r\n    at org.apache.orc.OrcProto$PostScript$1.parsePartialFrom(OrcProto.java:30353)\r\n    at org.apache.orc.OrcProto$PostScript$1.parsePartialFrom(OrcProto.java:30348)\r\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:89)\r\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:95)\r\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:49)\r\n    at org.apache.orc.OrcProto$PostScript.parseFrom(OrcProto.java:30791)\r\n    at org.apache.orc.impl.ReaderImpl.extractPostScript(ReaderImpl.java:644)\r\n    at org.apache.orc.impl.ReaderImpl.extractFileTail(ReaderImpl.java:814)\r\n    at org.apache.orc.impl.ReaderImpl.<init>(ReaderImpl.java:567)\r\n    at org.apache.hadoop.hive.ql.io.orc.ReaderImpl.<init>(ReaderImpl.java:61){noformat}\r\nSo, it is not possible to query the data from good files. The only way available today is to identify corrupted files from the table and remove them.\r\n\r\nOrc-tools is taking a lot of time to find out the corrupt files as it will traverse each file sequentially and show errors for corrupt file. \r\n\r\n*Proposal:*\r\n\r\nIn spark we have a config, *ignoreCorruptFiles* using which we can read data from rest of the files skipping corrupt files.\r\n\r\nCan we also implement something like this in Hive as well?\r\n\r\nWe can have a flag to enable this feature which is disabled by default.\r\n\r\n \r\n\r\n*Issues:*\r\n\r\nIf we do not fail the queries, corrupt files may accumulate and may cause issues later like size of the table, incorrect results etc..\r\n\r\n \r\n\r\nThe reason behind requesting this feature is that it is very difficult to identify faulty/corrupt files easily in a large table/s. \r\n\r\nSo it is also good if we can list all the corrupt files using a simple Hive query, so that they can be deleted without disturbing the actual Hive query flow to skip them", "customfield_10010": null, "timetracking": {}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12310320": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "Skip corrupted files while reading an Orc table", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [], "maxResults": 0, "total": 0, "startAt": 0}, "customfield_12311820": "0|z1y5nk:", "customfield_12314139": null}}