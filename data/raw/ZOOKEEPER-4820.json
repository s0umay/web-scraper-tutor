{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13573558", "self": "https://issues.apache.org/jira/rest/api/2/issue/13573558", "key": "ZOOKEEPER-4820", "fields": {"fixVersions": [{"self": "https://issues.apache.org/jira/rest/api/2/version/12353481", "id": "12353481", "name": "3.10.0", "archived": false, "released": false}, {"self": "https://issues.apache.org/jira/rest/api/2/version/12354432", "id": "12354432", "description": "", "name": "3.9.3", "archived": false, "released": true, "releaseDate": "2024-10-24"}], "resolution": {"self": "https://issues.apache.org/jira/rest/api/2/resolution/1", "id": "1", "description": "A fix for this issue is checked into the tree and tested.", "name": "Fixed"}, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "labels": ["pull-request-available"], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": 0, "customfield_12312330": null, "versions": [], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [{"id": "12681430", "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12681430", "type": {"id": "12310000", "name": "Duplicate", "inward": "is duplicated by", "outward": "duplicates", "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"}, "outwardIssue": {"id": "13554898", "key": "ZOOKEEPER-4763", "self": "https://issues.apache.org/jira/rest/api/2/issue/13554898", "fields": {"summary": "Logback dependency should be scope provided/test", "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/1", "id": "1", "description": "A problem which impairs or prevents the functions of the product.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype", "name": "Bug", "subtask": false, "avatarId": 21133}}}}], "customfield_12312339": null, "customfield_12313825": null, "assignee": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=pkarwasz", "name": "pkarwasz", "key": "pkarwasz", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Piotr Karwasz", "active": true, "timeZone": "Etc/UTC"}, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/6", "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png", "name": "Closed", "id": "6", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "components": [{"self": "https://issues.apache.org/jira/rest/api/2/component/12312381", "id": "12312381", "name": "java client", "description": "The java client interface for ZooKeeper"}], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": 0, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=fanningpj", "name": "fanningpj", "key": "fanningpj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "PJ Fanning", "active": true, "timeZone": "Europe/Madrid"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=fanningpj", "name": "fanningpj", "key": "fanningpj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "PJ Fanning", "active": true, "timeZone": "Europe/Madrid"}, "aggregateprogress": {"progress": 11400, "total": 11400, "percent": 100}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 11400, "total": 11400, "percent": 100}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4820/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 19, "worklogs": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/913773", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ppkarwasz opened a new pull request, #2155:\nURL: https://github.com/apache/zookeeper/pull/2155\n\n   Java libraries should not have `runtime` dependencies on logging backends, since they are often included in third-party applications that might make a different choice of backend.\r\n   \r\n   This PR:\r\n   \r\n   * removes the Logback dependency from the runtime scope of the `zookeeper` artifact and moves it into the `test` Maven scope,\r\n   * adds Logback to `zookeeper-assembly`, which is used to produce the standalone [binary distribution](https://zookeeper.apache.org/releases) available on Zookeeper's site.\n\n\n", "created": "2024-04-09T21:05:23.367+0000", "updated": "2024-04-09T21:05:23.367+0000", "started": "2024-04-09T21:05:23.367+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "913773", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/913876", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "shoothzj commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2046946911\n\n   maybe we can mark this dependency as runtime optional instead of test?\n\n\n", "created": "2024-04-10T08:54:50.088+0000", "updated": "2024-04-10T08:54:50.088+0000", "started": "2024-04-10T08:54:50.087+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "913876", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/913936", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ppkarwasz commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2047451913\n\n   > maybe we can mark this dependency as runtime optional instead of test?\r\n   \r\n   Personally I am not a big fan of `optional` or `provided` dependencies: their role is documentation only. The meaning is pretty much up to each developer to interpret. I interpret `provided` as \"we don't bundle Logback, but you **need** it for Zookeeper to run\". Regarding `optional` I interpret it as \"some Zookeeper features only work with Logback\" (a Logback appender maybe?). I think the message that should be sent to users is \"Zookeeper prefers/recommends Logback, but it will work with whatever SLF4J implementation your provide him\".\r\n   \r\n   Inside the Zookeeper project their usefulness is also somehow limited: the Maven Compiler and Surefire plugins will use them, but the Maven Assembly plugin will not package them in the `tar.gz` archive.\r\n   \r\n   So the only difference between runtime `optional` and `test` is that Logback is available at compilation time. This **is not** an advantage: if Zookeeper fails to compile without Logback, it means that it references some Logback-specific classes.\r\n   \r\n   **Remark**: The way Logback is treated in this PR is similar to the Jetty dependency. Jetty is included in the `tar.gz`, but there are no runtime dependencies on it.\n\n\n", "created": "2024-04-10T12:48:09.443+0000", "updated": "2024-04-10T12:48:09.443+0000", "started": "2024-04-10T12:48:09.443+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "913936", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914018", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on code in PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#discussion_r1559857699\n\n\n##########\nzookeeper-server/pom.xml:\n##########\n@@ -177,6 +169,11 @@\n       <artifactId>tools</artifactId>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>ch.qos.logback</groupId>\n+      <artifactId>logback-classic</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n\nReview Comment:\n   There are two requirements here:\r\n   \r\n   1. Ensure it's available for the tests, which require it, and\r\n   2. Ensure it is excluded by default from any project that depends on this one.\r\n   \r\n   Specifying it as a test scope achieves both of these. And, because runtime scope is included in the test classpath, specifying it as an optional runtime dependency would also achieve both of these.\r\n   \r\n   However, specifying an optional runtime dependency here would be a bit more helpful, because users generally familiar with Java logging frameworks would understand that there's a runtime component that they need to add themselves. This is not clear when it's only added to the test scope.\n\n\n\n##########\nzookeeper-assembly/pom.xml:\n##########\n@@ -103,6 +103,10 @@\n       <groupId>jline</groupId>\n       <artifactId>jline</artifactId>\n     </dependency>\n+    <dependency>\n+      <groupId>ch.qos.logback</groupId>\n+      <artifactId>logback-classic</artifactId>\n+    </dependency>\n\nReview Comment:\n   This is good because it actually is an explicit dependency of the assembly. This project requires it in the bundle it creates. So, regardless of what happens in the other pom.xml, this is correct.\n\n\n\n", "created": "2024-04-10T17:52:24.495+0000", "updated": "2024-04-10T17:52:24.495+0000", "started": "2024-04-10T17:52:24.495+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914018", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914020", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ppkarwasz commented on code in PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#discussion_r1559874907\n\n\n##########\nzookeeper-server/pom.xml:\n##########\n@@ -177,6 +169,11 @@\n       <artifactId>tools</artifactId>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>ch.qos.logback</groupId>\n+      <artifactId>logback-classic</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n\nReview Comment:\n   I don't really have a preference, since functionally the two declarations are the same.\r\n   \r\n   I switched to `optional` in the `runtime` scope.\n\n\n\n", "created": "2024-04-10T18:09:00.684+0000", "updated": "2024-04-10T18:09:00.684+0000", "started": "2024-04-10T18:09:00.683+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914020", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914021", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2048181083\n\n   > Personally I am not a big fan of `optional` or `provided` dependencies: their role is documentation only.\r\n   \r\n   It affects behavior, so I would not say it's documentation only. But even if it were, there is value in documentation... in communicating intent to downstream consumers of the project.\r\n   \r\n   > The meaning is pretty much up to each developer to interpret. I interpret `provided` as \"we don't bundle Logback, but you **need** it for Zookeeper to run\". Regarding `optional` I interpret it as \"some Zookeeper features only work with Logback\" (a Logback appender maybe?).\r\n   \r\n   Maven [actually defines](https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html) the [meaning of these](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html). I think your interpretation is pretty much correct, because it aligns with these definitions, but I don't think it's as subjective as you suggest. These definitions are what developers use to implement behavioral differences.\r\n   \r\n   Optional just means you have the option to exclude it and that Maven does so by default. It doesn't say anything about what behavioral changes might result or what you might require in its place, though, if you choose to exclude it. For that, you kind of have to know something about what is being excluded and why. A little understanding of Java logging frameworks like slf4j close this gap, though, and it will be clear to most users that the runtime implementation of slf4j is interchangeable, and that's why this implementation is optional. So, I don't think it'd be a problem to mark it as optional.\r\n   \r\n   > I think the message that should be sent to users is \"Zookeeper prefers/recommends Logback, but it will work with whatever SLF4J implementation your provide him\".\r\n   \r\n   I would say \"happens to use\" rather than \"prefers/recommends\", but yes, I think that message is basically the right message. But I think that message can be communicated with optional, and a basic understanding of Java logging frameworks.\r\n   \r\n   > Inside the Zookeeper project their usefulness is also somehow limited: the Maven Compiler and Surefire plugins will use them, but the Maven Assembly plugin will not package them in the `tar.gz` archive.\r\n   > \r\n   > So the only difference between runtime `optional` and `test` is that Logback is available at compilation time. This **is not** an advantage: if Zookeeper fails to compile without Logback, it means that it references some Logback-specific classes.\r\n   \r\n   This is not true. There's actually no difference here. If it's marked optional alone, but still in the default \"compile\" scope, it will be available at compilation time. However, if it's marked \"runtime\", it is not available at compilation time... only test. That's why \"optional\" is frequently used in conjunction with \"runtime\" scope. So, there's actually no difference in behavior between these... it really just comes down to communicating intent.\r\n   \r\n   > \r\n   > **Remark**: The way Logback is treated in this PR is similar to the Jetty dependency. Jetty is included in the `tar.gz`, but there are no runtime dependencies on it.\r\n   \r\n   This is a strange comparison, because jetty is actually marked as provided, which puts it on the compile and runtime classpaths. So, contrary to what you just said, there actually *is* a runtime dependency for it. I would actually argue that these should just be regular compile (or runtime) dependencies, though, and not marked provided, since it's probably not expected that jetty will be provided by another project, since it's provided by this one. But that's outside the scope of this change.\r\n   \r\n   In any case, because ZooKeeper does actually have a compile time dependency on logback for its tests, I think marking it as a test dependency is fine, since it achieves the same thing as a runtime optional dependency, but I would still prefer runtime optional over test, because it communicates that something is being omitted from the runtime scope that may need to be added in order to achieve particular functionality (logging).\n\n\n", "created": "2024-04-10T18:16:13.232+0000", "updated": "2024-04-10T18:16:13.232+0000", "started": "2024-04-10T18:16:13.231+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914021", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914022", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on code in PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#discussion_r1559893434\n\n\n##########\nzookeeper-assembly/pom.xml:\n##########\n@@ -103,6 +103,10 @@\n       <groupId>jline</groupId>\n       <artifactId>jline</artifactId>\n     </dependency>\n+    <dependency>\n+      <groupId>ch.qos.logback</groupId>\n+      <artifactId>logback-classic</artifactId>\n+    </dependency>\n\nReview Comment:\n   By convention, Apache Accumulo marks all of its assembly dependencies as \"optional\", just in case somebody actually depends on the tarball out of a Maven repository, it won't resolve all the dependencies that were used to build the tarball. We could have used \"provided\" instead for that purpose. But ultimately, it doesn't matter if you're not publishing the assembly to Maven. The conventions for dealing with assemblies in Maven repos kind of break all the norms used for jars. Either way, everything bundled in the assembly should be explicitly listed as a dependency, regardless of whatever other scopes/modifiers you put on them.\n\n\n\n", "created": "2024-04-10T18:25:37.215+0000", "updated": "2024-04-10T18:25:37.215+0000", "started": "2024-04-10T18:25:37.215+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914022", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914029", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ppkarwasz commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2048289428\n\n   > > The meaning is pretty much up to each developer to interpret. I interpret `provided` as \"we don't bundle Logback, but you **need** it for Zookeeper to run\". Regarding `optional` I interpret it as \"some Zookeeper features only work with Logback\" (a Logback appender maybe?).\r\n   > \r\n   > Maven [actually defines](https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html) the [meaning of these](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html). I think your interpretation is pretty much correct, because it aligns with these definitions, but I don't think it's as subjective as you suggest. These definitions are what developers use to implement behavioral differences.\r\n   \r\n   Inside the Zookeeper project I agree: there are behavioral differences. But if Zookeeper is used as a dependency in another project, the differences fade.\r\n   \r\n   >> I think the message that should be sent to users is \"Zookeeper prefers/recommends Logback, but it will work with whatever SLF4J implementation your provide him\".\r\n   >\r\n   > I would say \"happens to use\" rather than \"prefers/recommends\", but yes, I think that message is basically the right message. But I think that message can be communicated with optional, and a basic understanding of Java logging frameworks.\r\n   \r\n   Yes, it makes sense. I might steal your interpretation and add an optional runtime dependency on Logback to `log4j-to-slf4j`, although the proposal to make Log4j Core an optional runtime dependency of `log4j-slf4j2-impl` in [LOG4J2-3601](https://issues.apache.org/jira/browse/LOG4J2-3601) was not met with a big applause. :stuck_out_tongue_winking_eye: [Disclaimer: I understand that these examples give the user only one serious choice of logging backend, while Zookeeper has two]\r\n   \r\n   > > Inside the Zookeeper project their usefulness is also somehow limited: the Maven Compiler and Surefire plugins will use them, but the Maven Assembly plugin will not package them in the `tar.gz` archive.\r\n   > > So the only difference between runtime `optional` and `test` is that Logback is available at compilation time. This **is not** an advantage: if Zookeeper fails to compile without Logback, it means that it references some Logback-specific classes.\r\n   > \r\n   > This is not true. There's actually no difference here. If it's marked optional alone, but still in the default \"compile\" scope, it will be available at compilation time. However, if it's marked \"runtime\", it is not available at compilation time... only test. That's why \"optional\" is frequently used in conjunction with \"runtime\" scope. So, there's actually no difference in behavior between these... it really just comes down to communicating intent.\r\n   \r\n   Sorry, I was thinking `compile optional`. Thanks for correcting me.\r\n   \r\n   \r\n   \n\n\n", "created": "2024-04-10T19:28:58.692+0000", "updated": "2024-04-10T19:28:58.692+0000", "started": "2024-04-10T19:28:58.692+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914029", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914292", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2050713619\n\n   > Yes, it makes sense. I might steal your interpretation and add an optional runtime dependency on Logback to `log4j-to-slf4j`, although the proposal to make Log4j Core an optional runtime dependency of `log4j-slf4j2-impl` in [LOG4J2-3601](https://issues.apache.org/jira/browse/LOG4J2-3601) was not met with a big applause. ðŸ˜œ [Disclaimer: I understand that these examples give the user only one serious choice of logging backend, while Zookeeper has two]\r\n   \r\n   LOG4J2-3601 was a problem because:\r\n   \r\n   1. it was an unexpected change in behavior from `log4j-slf4j-impl` to `log4j-slf4j2-impl` to be more \"flexible\" that nobody asked for and made things inconvenient, and\r\n   2. the new use cases it supported were nonsensical (they added an extra layer of log4j that wasn't needed and adding it for those use cases would have been bad practice)\r\n   \r\n   I suspect adding logback as an optional runtime dependency to `log4j-to-slf4j` is probably not a great idea, but for different reasons. For starters, choosing logback seems arbitrary and a less good default than, say, `slf4j-simple`. slf4j has many runtimes that are all optional, and logback is only one of them. It's not really necessary to list all of them as optional runtimes, or any of them. The website does a better job documenting how to bind runtimes than the XML in a POM would. It's also a different situation than here with ZK, where logback is in a different position because ZK chose logback as its default (and what it ships with). But, ZK also needs to more easily support other runtimes when ZK is used like a library dependency. That's very different than `log4j-to-slf4j` or `slfj-api`, where there is no default runtime selected. In any case, that's a discussion for the log4j community. Feel free to tag me in any discussions of that, though, if you want me to provide a review or an opinion there.\n\n\n", "created": "2024-04-11T23:29:53.060+0000", "updated": "2024-04-11T23:29:53.060+0000", "started": "2024-04-11T23:29:53.059+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914292", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914293", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2050719455\n\n   I did notice that there's a failing test, `zookeeper-contrib/zookeeper-contrib-zooinspector/src/test/java/org/apache/zookeeper/inspector/LoggerTest.java`\r\n   \r\n   I'm not sure if the test was failing before this. But, it doesn't look like a good test. It looks like it's testing the logging framework itself... which is outside the scope of ZK. That's a kind of test I would expect from upstream in the logging library. It makes no sense to be included in the zookeeper inspector contrib tests, since it has nothing to do with ZK or the inspector contrib. I would recommend just deleting the test. It's not needed, and serves no purpose for ZK.\n\n\n", "created": "2024-04-11T23:37:09.197+0000", "updated": "2024-04-11T23:37:09.197+0000", "started": "2024-04-11T23:37:09.197+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914293", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/914294", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2050722823\n\n   Sorry, one more comment: looking at this closely, it looks like some updates might be needed to fix the logging dependencies in the contrib poms, too. They might also need similar changes as `zookeeper-server/pom.xml`, but I'm not very familiar with them... one of them, the fatjar one, based on its name, looks like it might need changes similar to the assembly... but I'm not really sure what purpose that contrib project serves, so I can't be certain.\n\n\n", "created": "2024-04-11T23:41:17.355+0000", "updated": "2024-04-11T23:41:17.355+0000", "started": "2024-04-11T23:41:17.354+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "914294", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/931730", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "kezhuw commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2310336972\n\n   > with this change are you able to see the logs while running the unit tests ?\r\n   \r\n   Yes. I confirmed this. cc @eolivelli \n\n\n", "created": "2024-08-26T14:19:59.070+0000", "updated": "2024-08-26T14:19:59.070+0000", "started": "2024-08-26T14:19:59.069+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "931730", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/935254", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2359699808\n\n   This looks like it was done and reviewed favorably, but never actually merged.\n\n\n", "created": "2024-09-19T00:59:34.587+0000", "updated": "2024-09-19T00:59:34.587+0000", "started": "2024-09-19T00:59:34.586+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "935254", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/935258", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar merged PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155\n\n\n", "created": "2024-09-19T03:06:54.965+0000", "updated": "2024-09-19T03:06:54.965+0000", "started": "2024-09-19T03:06:54.964+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "935258", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/935259", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2359886678\n\n   @ctubbsii Cool, thanks for the heads-up. I'm happy to commit patches for the upcoming 3.9.3 release.\r\n   @ppkarwasz Thanks for the contribution, would you please assign the Jira to yourself?\n\n\n", "created": "2024-09-19T03:08:37.082+0000", "updated": "2024-09-19T03:08:37.082+0000", "started": "2024-09-19T03:08:37.081+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "935259", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/935268", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ppkarwasz commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2359943237\n\n   @anmolnar,\r\n   \r\n   I don't have enough permissions on JIRA to assign ZOOKEEPER issues. :wink: \n\n\n", "created": "2024-09-19T04:18:26.610+0000", "updated": "2024-09-19T04:18:26.610+0000", "started": "2024-09-19T04:18:26.610+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "935268", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/935360", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2361310720\n\n   > @anmolnar,\r\n   > \r\n   > I don't have enough permissions on JIRA to assign ZOOKEEPER issues. ðŸ˜‰\r\n   \r\n   What's your jira id?\n\n\n", "created": "2024-09-19T15:14:49.461+0000", "updated": "2024-09-19T15:14:49.461+0000", "started": "2024-09-19T15:14:49.460+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "935360", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/935385", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ppkarwasz commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2361561061\n\n   > > @anmolnar,\r\n   > > I don't have enough permissions on JIRA to assign ZOOKEEPER issues. ðŸ˜‰\r\n   > \r\n   > What's your jira id?\r\n   \r\n   `pkarwasz` with one `p`.\n\n\n", "created": "2024-09-19T16:43:02.014+0000", "updated": "2024-09-19T16:43:02.014+0000", "started": "2024-09-19T16:43:02.014+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "935385", "issueId": "13573558"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/worklog/935405", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on PR #2155:\nURL: https://github.com/apache/zookeeper/pull/2155#issuecomment-2362016552\n\n   > > > @anmolnar,\r\n   > > > I don't have enough permissions on JIRA to assign ZOOKEEPER issues. ðŸ˜‰\r\n   > > \r\n   > > \r\n   > > What's your jira id?\r\n   > \r\n   > `pkarwasz` with one `p`.\r\n   \r\n   It's done. Thanks!\n\n\n", "created": "2024-09-19T19:27:32.665+0000", "updated": "2024-09-19T19:27:32.665+0000", "started": "2024-09-19T19:27:32.664+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "935405", "issueId": "13573558"}]}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/3", "id": "3", "description": "A task that needs to be done.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype", "name": "Task", "subtask": false, "avatarId": 21148}, "timespent": 11400, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@6fa3b791[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3f085567[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@25b59e5b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@58eb54e7[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7544efec[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@672edd0e[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6ee0c0f6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6c2eeda1[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3ec74447[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@2f90283c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@471faa48[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5cc714ef[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12310801", "id": "12310801", "key": "ZOOKEEPER", "name": "ZooKeeper", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484", "id": "10484", "description": "Apache ZooKeeper related", "name": "ZooKeeper"}}, "aggregatetimespent": 11400, "customfield_12312520": null, "customfield_12312521": "Thu Sep 19 03:07:29 UTC 2024", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": "2024-09-19T03:07:29.000+0000", "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4820/watchers", "watchCount": 3, "isWatching": false}, "created": "2024-03-27T16:32:11.000+0000", "customfield_12310192": null, "customfield_12310191": null, "customfield_12310230": null, "updated": "2024-10-24T20:09:31.000+0000", "timeoriginalestimate": null, "description": "Since v3.8.0\r\n\r\nhttps://mvnrepository.com/artifact/org.apache.zookeeper/zookeeper/3.8.0\r\n\r\nIt's fine that Zookeeper uses Logback on the server side - but users who want to access Zookeeper using client side code also add this zookeeper jar to their classpaths. When zookeeper is used as client side lib, it should ideally not expose a logback dependency - just an slf4j-api jar dependency.\r\n\r\nWould it be possible to rework the zookeper pom so that client side users don't have to explicitly exclude logback jars? Many users will have their own preferred logging framework.\r\n\r\nIs there another zookeeper client side jar that could be instead of zookeeper.jar?", "customfield_10010": null, "timetracking": {"remainingEstimate": "0h", "timeSpent": "3h 10m", "remainingEstimateSeconds": 0, "timeSpentSeconds": 11400}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "zookeeper pom leaks logback dependency", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/comment/17831484", "id": "17831484", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii", "name": "ctubbsii", "key": "ctubbsii", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"}, "displayName": "Christopher Tubbs", "active": true, "timeZone": "America/New_York"}, "body": "In case anybody wants to work on this, theÂ rightÂ way to do this in Maven is to mark the dependency optional in addition to making it runtime:\r\n{code:xml}\r\n<optional>true</optional>\r\n<scope>runtime</scope>\r\n{code}\r\nHowever, you have to be careful if you use any build automation that changing the dependency in this way doesn't cause it to be omitted from a distribution assembly, like a .tar.gz, or .zip file. This might happen if you use a maven-assembly-plugin assembly descriptor that bundles dependencies, but omits optional ones, for example. I'm not sure if the default behavior of [includeDependencies|https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html] will include optional ones or not.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii", "name": "ctubbsii", "key": "ctubbsii", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"}, "displayName": "Christopher Tubbs", "active": true, "timeZone": "America/New_York"}, "created": "2024-03-27T17:39:54.263+0000", "updated": "2024-03-27T17:45:31.374+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/comment/17831485", "id": "17831485", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=fanningpj", "name": "fanningpj", "key": "fanningpj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "PJ Fanning", "active": true, "timeZone": "Europe/Madrid"}, "body": "or `<scope>provided</scope>`", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=fanningpj", "name": "fanningpj", "key": "fanningpj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "PJ Fanning", "active": true, "timeZone": "Europe/Madrid"}, "created": "2024-03-27T17:43:25.765+0000", "updated": "2024-03-27T17:43:25.765+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/comment/17831487", "id": "17831487", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii", "name": "ctubbsii", "key": "ctubbsii", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"}, "displayName": "Christopher Tubbs", "active": true, "timeZone": "America/New_York"}, "body": "Provided scope may achieve the same result for dependency resolution for dependent projects. However, they mean very different things. Provided means it's required, but not expected to be bundled because it is expected to be provided by the destination environment. In this case, we want the opposite: it's not required, but is expected to be bundled. However, there may be times where you need to use provided instead of using optional, because you need it to be handled in a specific way by a Maven plugin during the build, because different plugins do different things with these. For this, the correct way of doing it that communicates the relevant intent is to mark it optional and keep the scope as runtime. However, if provided is needed instead, to make a particular plugin work, you should understand that this may cause other problems downstream, and at the very least, you should add a comment in the POM explaining why provided is used instead, so the intention is clear.\r\n\r\nFor what it's worth, I think provided dependencies will be excluded by the maven-assembly-plugin, which is not what you want (but may not matter if the plugin is declared explicitly in the assembly descriptor). I'd stick with optional if it works.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii", "name": "ctubbsii", "key": "ctubbsii", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"}, "displayName": "Christopher Tubbs", "active": true, "timeZone": "America/New_York"}, "created": "2024-03-27T17:54:46.505+0000", "updated": "2024-03-27T17:57:19.989+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/comment/17835538", "id": "17835538", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=pkarwasz", "name": "pkarwasz", "key": "pkarwasz", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Piotr Karwasz", "active": true, "timeZone": "Etc/UTC"}, "body": "In this case I find both the {{optional}} attribute and the {{provided}} scope inappropriate for the {{zookeeper}} artifact.\r\n\r\nIf Zookeeper were to have an {{optional}} dependency on Logback, it might suggest that some part of Zookeeper uses Logback *directly*, e.g. to manage and change log levels. AFAIK it is not the case.\r\n\r\nIf Zookeeper were to have a dependency on Logback in the {{provided}} scope, I would interpret it as a strict requirement to have Logback on the runtime classpath. AFAIK any other logging backend will work as well.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=pkarwasz", "name": "pkarwasz", "key": "pkarwasz", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Piotr Karwasz", "active": true, "timeZone": "Etc/UTC"}, "created": "2024-04-09T21:14:58.686+0000", "updated": "2024-04-09T21:14:58.686+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13573558/comment/17882853", "id": "17882853", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "body": "Issue resolved by pull request 2155\n[https://github.com/apache/zookeeper/pull/2155]", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "created": "2024-09-19T03:07:29.571+0000", "updated": "2024-09-19T03:07:29.571+0000"}], "maxResults": 5, "total": 5, "startAt": 0}, "customfield_12311820": "0|z1o99k:", "customfield_12314139": null}}