{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13580043", "self": "https://issues.apache.org/jira/rest/api/2/issue/13580043", "key": "ZOOKEEPER-4832", "fields": {"fixVersions": [], "resolution": null, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/4", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg", "name": "Minor", "id": "4"}, "labels": [], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": null, "customfield_12312330": null, "versions": [], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [{"id": "12692997", "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12692997", "type": {"id": "10030", "name": "Reference", "inward": "is related to", "outward": "relates to", "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"}, "outwardIssue": {"id": "13599833", "key": "ZOOKEEPER-4889", "self": "https://issues.apache.org/jira/rest/api/2/issue/13599833", "fields": {"summary": "Fallback to DIGEST-MD5 auth mech should be disabled in Fips mode", "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/6", "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png", "name": "Closed", "id": "6", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/1", "id": "1", "description": "A problem which impairs or prevents the functions of the product.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype", "name": "Bug", "subtask": false, "avatarId": 21133}}}}], "customfield_12312339": null, "customfield_12313825": null, "assignee": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}, "components": [{"self": "https://issues.apache.org/jira/rest/api/2/component/12312422", "id": "12312422", "name": "documentation", "description": "Cross cutting documentation, including docs/site/wiki."}], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": null, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=electricthunder", "name": "electricthunder", "key": "JIRAUSER305543", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Mark", "active": true, "timeZone": "Etc/UTC"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=electricthunder", "name": "electricthunder", "key": "JIRAUSER305543", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Mark", "active": true, "timeZone": "Etc/UTC"}, "aggregateprogress": {"progress": 0, "total": 0}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 0, "total": 0}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4832/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 0, "worklogs": []}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/4", "id": "4", "description": "An improvement or enhancement to an existing feature or task.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype", "name": "Improvement", "subtask": false, "avatarId": 21140}, "timespent": null, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@5fa35b65[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@63f96b15[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5e6d307[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2d6fb16d[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3b03964d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@2546da27[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@160b4b63[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@46bf7416[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@61293372[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@72ad4a92[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3eb147f7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3139bf3[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12310801", "id": "12310801", "key": "ZOOKEEPER", "name": "ZooKeeper", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484", "id": "10484", "description": "Apache ZooKeeper related", "name": "ZooKeeper"}}, "aggregatetimespent": null, "customfield_12312520": null, "customfield_12312521": "Sun Nov 24 22:19:44 UTC 2024", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": null, "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4832/watchers", "watchCount": 3, "isWatching": false}, "created": "2024-05-22T01:04:32.000+0000", "customfield_12310192": null, "customfield_12310191": null, "customfield_12310230": null, "updated": "2024-11-24T22:20:13.000+0000", "timeoriginalestimate": null, "description": "Hi there.\r\n\r\nWe're attempting to work out how to produce a zookeeper package and image which is FIPS compliant.\r\n\r\nWe've found multiple references in the code base to `zookeeper.fips-mode`, however on closer inspection this is very misleading, as it is not enabling any FIPS specific settings, neither does it enable zookeeper for FIPS mode. Instead, it just looks to disable 'ZKTrustManager'.\r\n\r\nIt would be great to get some guidance here, and possibly an article / docs update with configuration details.\r\n\r\nFor example, when working with Java applications, there are usually multiple layers to building a FIPS image, including:\r\n * Configuring OpenSSL for FIPS mode\r\n * Configuring a FIPS compliant JDK/JRE on the host, such as bcfips (FIPS BouncyCastle)\r\n * Creating a suitable java.security file to restrict usage to non-approved FIPS providers and crypto algorithms\r\n * Updating the CLASSPATH to reference the bcfips jars\r\n * Refactoring the code base - removing any references to non-FIPS crypto usage, such as non-FIPS bouncycastle, and potentially any other crypto libs\r\n * Remove any usage of unapproved crypto algorithms (i.e des, md5 etc)\r\n\r\nSome questions:\r\n # Do you have any more info you can share on how to properly configure zookeeper for FIPS?\r\n # Zookeeper seems to reference bouncycastle in some tests - can these be ignored safely? Any other usage of non-FIPS bouncycastle elsewhere?\r\n # Are there any other crypto libraries used which may be a concern?\r\n # Are there any dependencies used which themselves use non-FIPS crypto?\r\n # Are the references to non-approved crypto algorithms in critical path?\r\n\r\n \r\n\r\n{*}Expanding on question 2 above{*}, this is the only references i could seem to find for bouncycastle:\r\n\r\n```\r\n\r\nzookeeper-server/src/test/java/org/apache/zookeeper/common/BaseX509ParameterizedTestCase.java\r\nzookeeper-server/src/test/java/org/apache/zookeeper/common/X509TestContext.java\r\nzookeeper-server/src/test/java/org/apache/zookeeper/common/X509TestHelpers.java\r\n\r\n```\r\n\r\n*Expanding on question 5:*\r\n\r\nmd5 usage:\r\n\r\n```zookeeper-server/src/main/java/org/apache/zookeeper/server/ZooKeeperServer.java\r\nzookeeper-server/src/main/java/org/apache/zookeeper/server/auth/DigestLoginModule.java\r\nzookeeper-server/src/main/java/org/apache/zookeeper/server/auth/SaslServerCallbackHandler.java\r\nzookeeper-server/src/main/java/org/apache/zookeeper/server/quorum/auth/SaslQuorumServerCallbackHandler.java\r\nzookeeper-server/src/main/java/org/apache/zookeeper/util/SecurityUtils.java\r\n\r\n```\r\n\r\ndes usage:\r\n\r\n```\r\n\r\nzookeeper-server/src/test/java/org/apache/zookeeper/common/X509TestHelpers.java\r\n\r\n```\r\n\r\n ", "customfield_10010": null, "timetracking": {}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "Better guidance on how to configure zookeeper for FIPS", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13580043/comment/17877142", "id": "17877142", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "body": "Hi [~electricthunder] ,\r\n\r\nThanks for opening this Jira for discussion. Let me try to answer your questions here:\r\n\r\nI agree that currently *zookeeper.fips-mode* setting only toggles the usage of {_}ZKTrustManager{_}, because that was the first biggest obstacle against running ZK in FIPS-mode, so I had to quickly disable it. We could certainly expand the coverage of that switch for other meaningful changes.\r\n\r\nIt's important to note that packaging of ZooKeeper or releasing ZooKeeper packages is not in the scope of the work of Apache ZooKeeper Community. As an ASF project team, we only release the source code of the product as it is with the documentation and some examples. We do not and will never provide guidance on how to configure your system for running in FIPS-mode. As a consequence, let me skip your questions about configurations outside of ZooKeeper source code.\r\n{quote} * Refactoring the code base - removing any references to non-FIPS crypto usage, such as non-FIPS bouncycastle, and potentially any other crypto libs\r\n * Remove any usage of unapproved crypto algorithms (i.e des, md5 etc){quote}\r\nGreat idea. I highly encourage you to provide pull requests covering these changes for the community to review if you have the bandwidth.\r\n{quote}{*}Expanding on question 2 above{*}, this is the only references i could seem to find for bouncycastle:\r\n{quote}\r\nTHis should not be a blocker for FIPS, right?\r\n\r\nTest classes are not built into the runtime.\r\n{quote}*Expanding on question 5:*\r\n{quote}\r\nCould you please provide a patch to optionally remove the usage of MD5?", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "created": "2024-08-27T19:00:50.658+0000", "updated": "2024-08-27T19:00:50.658+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13580043/comment/17877484", "id": "17877484", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "body": "For instance, a good subtask would be to set default digest method to SHA3-512 in DigestAuthenticationProvider.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "created": "2024-08-28T17:57:25.000+0000", "updated": "2024-08-28T17:57:25.000+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13580043/comment/17900740", "id": "17900740", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "body": "Hi [~electricthunder] \r\n\r\nI'm not sure if you're still monitoring this effort, but I recently created a pull request to avoid usage of DIGEST-MD5 sasl mech in FIPS mode: ZOOKEEPER-4889\r\n\r\nIt might be interesting for you. Anything you think outstanding for Fips support would be useful.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "created": "2024-11-24T22:19:44.842+0000", "updated": "2024-11-24T22:19:44.842+0000"}], "maxResults": 3, "total": 3, "startAt": 0}, "customfield_12311820": "0|z1pcqo:", "customfield_12314139": null}}