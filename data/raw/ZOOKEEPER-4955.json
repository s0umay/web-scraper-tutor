{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13625234", "self": "https://issues.apache.org/jira/rest/api/2/issue/13625234", "key": "ZOOKEEPER-4955", "fields": {"fixVersions": [{"self": "https://issues.apache.org/jira/rest/api/2/version/12353481", "id": "12353481", "name": "3.10.0", "archived": false, "released": false}], "resolution": {"self": "https://issues.apache.org/jira/rest/api/2/resolution/1", "id": "1", "description": "A fix for this issue is checked into the tree and tested.", "name": "Fixed"}, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "labels": ["pull-request-available"], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": 0, "customfield_12312330": null, "versions": [], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [{"id": "12706678", "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12706678", "type": {"id": "12310460", "name": "Child-Issue", "inward": "is a child of", "outward": "is a parent of", "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310460"}, "inwardIssue": {"id": "13622681", "key": "ZOOKEEPER-4949", "self": "https://issues.apache.org/jira/rest/api/2/issue/13622681", "fields": {"summary": "Clean up TLS CRL/OCSP configuration", "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/4", "id": "4", "description": "An improvement or enhancement to an existing feature or task.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype", "name": "Improvement", "subtask": false, "avatarId": 21140}}}}], "customfield_12312339": null, "customfield_12313825": null, "assignee": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=kezhuw", "name": "kezhuw", "key": "kezhuw", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=kezhuw&avatarId=37929", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kezhuw&avatarId=37929", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kezhuw&avatarId=37929", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kezhuw&avatarId=37929"}, "displayName": "Kezhu Wang", "active": true, "timeZone": "Etc/GMT-8"}, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "components": [{"self": "https://issues.apache.org/jira/rest/api/2/component/12329414", "id": "12329414", "name": "security"}], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": 0, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "aggregateprogress": {"progress": 26400, "total": 26400, "percent": 100}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 26400, "total": 26400, "percent": 100}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4955/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 44, "worklogs": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977258", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty opened a new pull request, #2289:\nURL: https://github.com/apache/zookeeper/pull/2289\n\n   (no comment)\n\n\n", "created": "2025-08-01T06:50:37.074+0000", "updated": "2025-08-01T06:50:37.074+0000", "started": "2025-08-01T06:50:37.074+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977258", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977259", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3142968537\n\n   In previous patched, this functionality was split into two separated config options.\r\n   I have consolidated those into a single property with four possible values here.\r\n   \r\n   FYI @anmolnar \n\n\n", "created": "2025-08-01T06:51:28.569+0000", "updated": "2025-08-01T06:51:28.569+0000", "started": "2025-08-01T06:51:28.568+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977259", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977588", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2252784327\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/ZKConfig.java:\n##########\n@@ -146,6 +155,21 @@ public String getProperty(String key) {\n         return properties.get(key);\n     }\n \n+    /**\n+     * Get the property value and call String.trim() on it if not null\n+     *\n+     * @param key\n+     * @return property value\n+     */\n+    public String getTrimmedProperty(String key) {\n+        String property = getProperty(key);\n+        if (property != null) {\n+            return property.trim();\n+        } else {\n+            return property;\n+        }\n\nReview Comment:\n   nit:\r\n   ```java\r\n   return property != null ? property.trim() : \"\";\r\n   ```\r\n   You don't need the null check in this case.\n\n\n\n", "created": "2025-08-04T23:33:28.646+0000", "updated": "2025-08-04T23:33:28.646+0000", "started": "2025-08-04T23:33:28.646+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977588", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977589", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2252790455\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/ZKConfig.java:\n##########\n@@ -284,4 +308,29 @@ public int getInt(String key, int defaultValue) {\n         return defaultValue;\n     }\n \n+    /**\n+     * Get the value of the <code>key</code> property as an\n+     * <code>SslRevocationEnabled</code> enum. If property is not set\n+     * <code>SslRevocationEnabled.LEGACY</code> is returned.\n+     *\n+     * @param key\n+     * @return the SslRevocationEnabled enum\n+     * @throws IllegalArgumentException if the value cannot be parsed\n+     */\n+    public SslRevocationEnabled getSslRevocationEnabled(String key) throws SSLContextException {\n+        String value = getTrimmedProperty(key);\n+        if (value == null || value.equalsIgnoreCase(SslRevocationEnabled.LEGACY.toString())) {\n+            return SslRevocationEnabled.LEGACY;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.JAVA_DEFAULT.toString())) {\n+            return SslRevocationEnabled.JAVA_DEFAULT;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.TRUE.toString())) {\n+            return SslRevocationEnabled.TRUE;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.FALSE.toString())) {\n+            return SslRevocationEnabled.FALSE;\n\nReview Comment:\n   What if...?\r\n   ```java\r\n   SslRevocationEnabled value = SslRevocationEnabled.valueOf(getProperty(key, SslRevocationEnabled.LEGACY.toString()));\r\n   if (value == null) {\r\n     // Error handling...\r\n   } else {\r\n     return value;\r\n   }\r\n   ```\n\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/ZKConfig.java:\n##########\n@@ -284,4 +308,29 @@ public int getInt(String key, int defaultValue) {\n         return defaultValue;\n     }\n \n+    /**\n+     * Get the value of the <code>key</code> property as an\n+     * <code>SslRevocationEnabled</code> enum. If property is not set\n+     * <code>SslRevocationEnabled.LEGACY</code> is returned.\n+     *\n+     * @param key\n+     * @return the SslRevocationEnabled enum\n+     * @throws IllegalArgumentException if the value cannot be parsed\n+     */\n+    public SslRevocationEnabled getSslRevocationEnabled(String key) throws SSLContextException {\n+        String value = getTrimmedProperty(key);\n+        if (value == null || value.equalsIgnoreCase(SslRevocationEnabled.LEGACY.toString())) {\n+            return SslRevocationEnabled.LEGACY;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.JAVA_DEFAULT.toString())) {\n+            return SslRevocationEnabled.JAVA_DEFAULT;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.TRUE.toString())) {\n+            return SslRevocationEnabled.TRUE;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.FALSE.toString())) {\n+            return SslRevocationEnabled.FALSE;\n\nReview Comment:\n   In this case you don't need `getTrimmedProperty()` at all.\n\n\n\n", "created": "2025-08-04T23:33:51.528+0000", "updated": "2025-08-04T23:33:51.528+0000", "started": "2025-08-04T23:33:51.528+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977589", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977590", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2252790455\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/ZKConfig.java:\n##########\n@@ -284,4 +308,29 @@ public int getInt(String key, int defaultValue) {\n         return defaultValue;\n     }\n \n+    /**\n+     * Get the value of the <code>key</code> property as an\n+     * <code>SslRevocationEnabled</code> enum. If property is not set\n+     * <code>SslRevocationEnabled.LEGACY</code> is returned.\n+     *\n+     * @param key\n+     * @return the SslRevocationEnabled enum\n+     * @throws IllegalArgumentException if the value cannot be parsed\n+     */\n+    public SslRevocationEnabled getSslRevocationEnabled(String key) throws SSLContextException {\n+        String value = getTrimmedProperty(key);\n+        if (value == null || value.equalsIgnoreCase(SslRevocationEnabled.LEGACY.toString())) {\n+            return SslRevocationEnabled.LEGACY;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.JAVA_DEFAULT.toString())) {\n+            return SslRevocationEnabled.JAVA_DEFAULT;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.TRUE.toString())) {\n+            return SslRevocationEnabled.TRUE;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.FALSE.toString())) {\n+            return SslRevocationEnabled.FALSE;\n\nReview Comment:\n   What if...?\r\n   ```java\r\n   SslRevocationEnabled value = SslRevocationEnabled.valueOf(getProperty(key, SslRevocationEnabled.LEGACY.toString().toUpperCase()));\r\n   if (value == null) {\r\n     // Error handling...\r\n   } else {\r\n     return value;\r\n   }\r\n   ```\n\n\n\n", "created": "2025-08-04T23:34:51.578+0000", "updated": "2025-08-04T23:34:51.578+0000", "started": "2025-08-04T23:34:51.577+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977590", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977591", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2252790455\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/ZKConfig.java:\n##########\n@@ -284,4 +308,29 @@ public int getInt(String key, int defaultValue) {\n         return defaultValue;\n     }\n \n+    /**\n+     * Get the value of the <code>key</code> property as an\n+     * <code>SslRevocationEnabled</code> enum. If property is not set\n+     * <code>SslRevocationEnabled.LEGACY</code> is returned.\n+     *\n+     * @param key\n+     * @return the SslRevocationEnabled enum\n+     * @throws IllegalArgumentException if the value cannot be parsed\n+     */\n+    public SslRevocationEnabled getSslRevocationEnabled(String key) throws SSLContextException {\n+        String value = getTrimmedProperty(key);\n+        if (value == null || value.equalsIgnoreCase(SslRevocationEnabled.LEGACY.toString())) {\n+            return SslRevocationEnabled.LEGACY;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.JAVA_DEFAULT.toString())) {\n+            return SslRevocationEnabled.JAVA_DEFAULT;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.TRUE.toString())) {\n+            return SslRevocationEnabled.TRUE;\n+        } else if (value.equalsIgnoreCase(SslRevocationEnabled.FALSE.toString())) {\n+            return SslRevocationEnabled.FALSE;\n\nReview Comment:\n   What if...?\r\n   ```java\r\n   SslRevocationEnabled value = SslRevocationEnabled.valueOf(getProperty(key, SslRevocationEnabled.LEGACY.toString()).toUpperCase());\r\n   if (value == null) {\r\n     // Error handling...\r\n   } else {\r\n     return value;\r\n   }\r\n   ```\n\n\n\n", "created": "2025-08-04T23:35:10.190+0000", "updated": "2025-08-04T23:35:10.190+0000", "started": "2025-08-04T23:35:10.190+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977591", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977606", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3153547370\n\n   re-written config parsing, and added some UTs, @anmolnar .\n\n\n", "created": "2025-08-05T06:09:39.465+0000", "updated": "2025-08-05T06:09:39.465+0000", "started": "2025-08-05T06:09:39.464+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977606", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/977862", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3160548716\n\n   ping @eolivelli @kezhuw @ztzg PTAL.\n\n\n", "created": "2025-08-06T15:03:42.376+0000", "updated": "2025-08-06T15:03:42.376+0000", "started": "2025-08-06T15:03:42.375+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "977862", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978009", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "kezhuw commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2260437454\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -541,21 +548,32 @@ public static X509TrustManager createTrustManager(\n         boolean ocspEnabled,\n         final boolean serverHostnameVerificationEnabled,\n         final boolean clientHostnameVerificationEnabled,\n-        final boolean fipsMode) throws TrustManagerException {\n+        final boolean fipsMode,\n+        final SslRevocationEnabled revocationEnabled) throws TrustManagerException {\n         if (trustStorePassword == null) {\n             trustStorePassword = \"\";\n         }\n         try {\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n             if (crlEnabled || ocspEnabled) {\n-                pbParams.setRevocationEnabled(true);\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(true);\n+                }\n                 System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n                 System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n                 if (ocspEnabled) {\n                     Security.setProperty(\"ocsp.enable\", \"true\");\n                 }\n             } else {\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(false);\n+                }\n+            }\n+\n+            if (revocationEnabled == SslRevocationEnabled.TRUE) {\n+                pbParams.setRevocationEnabled(true);\n+            } else if (revocationEnabled == SslRevocationEnabled.FALSE) {\n\nReview Comment:\n   `revocationEnabled` is default to `true` in java since java-8. In old path, it clears `revocationEnabled`.\r\n   \r\n   I don't think it deserves `JAVA_DEFAULT` for a public default. I think we could shape the candidates:\r\n   1. `legacy`:  behaves same as old, this should be the default in case of backport.\r\n   2. `true` or `false` to enable/disalbe revocation. `true` could be the default.\r\n   \r\n   * https://devdocs.io/openjdk~8/java/security/cert/pkixparameters#setRevocationEnabled-boolean-\r\n   * https://devdocs.io/openjdk~21/java.base/java/security/cert/pkixparameters#setRevocationEnabled(boolean)\n\n\n\n", "created": "2025-08-07T14:22:36.304+0000", "updated": "2025-08-07T14:22:36.304+0000", "started": "2025-08-07T14:22:36.304+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978009", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978024", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2260852403\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -541,21 +548,32 @@ public static X509TrustManager createTrustManager(\n         boolean ocspEnabled,\n         final boolean serverHostnameVerificationEnabled,\n         final boolean clientHostnameVerificationEnabled,\n-        final boolean fipsMode) throws TrustManagerException {\n+        final boolean fipsMode,\n+        final SslRevocationEnabled revocationEnabled) throws TrustManagerException {\n         if (trustStorePassword == null) {\n             trustStorePassword = \"\";\n         }\n         try {\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n             if (crlEnabled || ocspEnabled) {\n-                pbParams.setRevocationEnabled(true);\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(true);\n+                }\n                 System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n                 System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n                 if (ocspEnabled) {\n                     Security.setProperty(\"ocsp.enable\", \"true\");\n                 }\n             } else {\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(false);\n+                }\n+            }\n+\n+            if (revocationEnabled == SslRevocationEnabled.TRUE) {\n+                pbParams.setRevocationEnabled(true);\n+            } else if (revocationEnabled == SslRevocationEnabled.FALSE) {\n\nReview Comment:\n   > `revocationEnabled` is default to `true` in java since java-8. In old path, it clears `revocationEnabled`.\r\n   \r\n   That's only true sometimes.\r\n   It is enabled by default in SunJCE, but (only by looking at the code, not tested) it is disabled by default in BouncyCastle. There also other Cryptography providers where the behaviour may be different.\r\n   \r\n   > \r\n   > I don't think it deserves `JAVA_DEFAULT` for a public default. I think we could shape the candidates:\r\n   > \r\n   > 1. `legacy`:  behaves same as old, this should be the default in case of backport.\r\n   > 2. `true` or `false` to enable/disalbe revocation. `true` could be the default.\r\n   \r\n   The case for having a default NoOp option is that there are already mechanisms and defaults in the JVM that can be used to set this up.\r\n   \r\n   There can be any number of HTTP clients (and servers) in an application that includes the ZK client, and a user may want to threat these in a unified way.\r\n   \r\n   By not exposing a JVM default options, we force the user to always separately consider the ZK clients.\r\n   (Servers are less of a problem, as those are standlone processes)\r\n   \r\n   \"Yes, you have set up your JVM system properties to enable/disable CRL globally, but now you also need to make a separate change for the ZK config anyway\" is not user / admin friendly.\r\n   \r\n   My preference would be defaulting to \"java_default\" for 3.10 and \"legacy\" for backports.\r\n   \r\n   > \r\n   > * https://devdocs.io/openjdk~8/java/security/cert/pkixparameters#setRevocationEnabled-boolean-\r\n   > * https://devdocs.io/openjdk~21/java.base/java/security/cert/pkixparameters#setRevocationEnabled(boolean)\r\n   \r\n   \n\n\n\n", "created": "2025-08-07T16:34:17.389+0000", "updated": "2025-08-07T16:34:17.389+0000", "started": "2025-08-07T16:34:17.388+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978024", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978030", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3165021402\n\n   > I left comment about current approach.\r\n   > \r\n   > > As those options are also setting global System/Security properties, we do not have a way to enable revocation checks without clobbering the revocation related global properties.\r\n   > \r\n   > How about introducing `ssl.crl.populate-jvm-property` and `ssl.ocsp.populate-jvm-property` ?\r\n   > \r\n   > 1. Default to `true` for those in case of backporting.\r\n   > 2. Default to `false` for future versions.\r\n   \r\n   That's totally fine, one of my earlier patches did something similar.\r\n   \r\n   It's not really necessary, as simply leaving those at the default \"false\" settings will leave the System/Security properties alone, but this is the most unambigious solution.\r\n   \r\n   > \r\n   > This way we can solve the problem precisely without introducing `ssl.revocationEnabled` as an replacement of `ssl.crl`.\r\n   \r\n   That's not really true.\r\n   \r\n   The problem is that we need to work Java's capabilities, which are limited.\r\n   \r\n   Apart from the single setRevocationEnabled method (which only exists if we install a custom TrustManager), Java only has global settings for handling revocation config.\r\n   \r\n   That's why I think that the proper way to handle this to effectively deprecate the existing crl and ocsp properties (at least for the client), as figuring out how those work and interact is not rather ambigious.\r\n   \r\n   Ideally, in the client config both the crl and ocsp settings would default false, while the new ssl.revocationEnabled would default to \"java_default\". This effectively turns off any ZK specific CRL config.\r\n   \r\n   This lets any global JVM settings the user set work as expected.\r\n   Since Java does provide us with the single setRevocationEnabled knob, we expose that in case the user wants to get fancy, that lets the user control the ZK client setting \r\n   \r\n   If we only add the two populate properties, then we are giving the user a puzzle to figure out how to set up revocation.\r\n   (and also leave them with no way to use the security provider defaults for the custom truststore)\r\n   \n\n\n", "created": "2025-08-07T16:54:03.009+0000", "updated": "2025-08-07T16:54:03.009+0000", "started": "2025-08-07T16:54:03.009+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978030", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978098", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "kezhuw commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2262197297\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -541,21 +548,32 @@ public static X509TrustManager createTrustManager(\n         boolean ocspEnabled,\n         final boolean serverHostnameVerificationEnabled,\n         final boolean clientHostnameVerificationEnabled,\n-        final boolean fipsMode) throws TrustManagerException {\n+        final boolean fipsMode,\n+        final SslRevocationEnabled revocationEnabled) throws TrustManagerException {\n         if (trustStorePassword == null) {\n             trustStorePassword = \"\";\n         }\n         try {\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n             if (crlEnabled || ocspEnabled) {\n-                pbParams.setRevocationEnabled(true);\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(true);\n+                }\n                 System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n                 System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n                 if (ocspEnabled) {\n                     Security.setProperty(\"ocsp.enable\", \"true\");\n                 }\n             } else {\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(false);\n+                }\n+            }\n+\n+            if (revocationEnabled == SslRevocationEnabled.TRUE) {\n+                pbParams.setRevocationEnabled(true);\n+            } else if (revocationEnabled == SslRevocationEnabled.FALSE) {\n\nReview Comment:\n   I agree to most of above comments but one.\r\n   \r\n   > That's only true sometimes.\r\n   \r\n   >  It is enabled by default in SunJCE, but (only by looking at the code, not tested) it is disabled by default in BouncyCastle. There also other Cryptography providers where the behaviour may be different.\r\n   \r\n   How could cryptography providers override the default in jdk ?\r\n   \r\n   https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/java.base/share/classes/java/security/cert/PKIXParameters.java#L86-L92\r\n   \r\n   ```java\r\n   public class PKIXParameters implements CertPathParameters {\r\n   \r\n       private Set<TrustAnchor> unmodTrustAnchors;\r\n       private Date date;\r\n       private List<PKIXCertPathChecker> certPathCheckers;\r\n       private String sigProvider;\r\n       private boolean revocationEnabled = true;\r\n   ```\r\n   \r\n   > The case for having a default NoOp option is that there are already mechanisms and defaults in the JVM that can be used to set this up.\r\n   \r\n   We are using explicitly `PKIXBuilderParameters`, according to the documentation, `com.sun.net.ssl.checkRevocation` is useless in our path.\r\n   \r\n   https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html states that:\r\n   > If the init(KeyStore ks) method is used, then default PKIX parameters are used with the exception that revocation checking is disabled. It can be enabled by setting the com.sun.net.ssl.checkRevocation system property to true. This setting requires that the CertPath implementation can locate revocation information by itself. The PKIX implementation in the provider can do this in many cases but requires that the system property com.sun.security.enableCRLDP be set to true.\r\n   \r\n   https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ocsp.html states that:\r\n   > Client-driven OCSP is enabled by enabling revocation checking and enabling OCSP.\r\n   > \r\n   > To configure a Java client to use client-driven OCSP, the Java client must already be set up to connect to a > server using TLS.\r\n   >\r\n   >    Enable revocation checking. You can do this in two different ways.\r\n   >        Set the system property com.sun.net.ssl.checkRevocation to true.\r\n   >        Use the setRevocationEnabled method on PKIXParameters.\r\n   >    Enable client-driven OCSP:\r\n   >\r\n   >    Set the Security Property ocsp.enable to true.\r\n   >\r\n   > Both steps are necessary. The ocsp.enable setting has no effect unless revocation checking is enabled.\r\n   \r\n   I dropped `pbParams.setRevocationEnabled(true)` and `System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\")` in https://github.com/kezhuw/zookeeper/commit/826b33862832f04f0171a47a03b420f955fa0b9f and [`QuorumSSLTest` passes](https://github.com/kezhuw/zookeeper/actions/runs/16824320595/job/47657245027#step:6:541). This conforms to the doc that `PKIXParameters::revocationEnabled` is default to `true` and `com.sun.net.ssl.checkRevocation` is not consulted in case of explicitly pkix parameters.\n\n\n\n", "created": "2025-08-08T07:47:07.106+0000", "updated": "2025-08-08T07:47:07.106+0000", "started": "2025-08-08T07:47:07.105+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978098", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978104", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2262370296\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -541,21 +548,32 @@ public static X509TrustManager createTrustManager(\n         boolean ocspEnabled,\n         final boolean serverHostnameVerificationEnabled,\n         final boolean clientHostnameVerificationEnabled,\n-        final boolean fipsMode) throws TrustManagerException {\n+        final boolean fipsMode,\n+        final SslRevocationEnabled revocationEnabled) throws TrustManagerException {\n         if (trustStorePassword == null) {\n             trustStorePassword = \"\";\n         }\n         try {\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n             if (crlEnabled || ocspEnabled) {\n-                pbParams.setRevocationEnabled(true);\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(true);\n+                }\n                 System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n                 System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n                 if (ocspEnabled) {\n                     Security.setProperty(\"ocsp.enable\", \"true\");\n                 }\n             } else {\n+                if (revocationEnabled == SslRevocationEnabled.LEGACY) {\n+                    pbParams.setRevocationEnabled(false);\n+                }\n+            }\n+\n+            if (revocationEnabled == SslRevocationEnabled.TRUE) {\n+                pbParams.setRevocationEnabled(true);\n+            } else if (revocationEnabled == SslRevocationEnabled.FALSE) {\n\nReview Comment:\n   Thanks for correcting me.\r\n   \r\n   Your findings above also support that the current code (specifically explicitly calling pbParams.setRevocationEnabled(false) when the ZK crl properties are not set)\r\n   are not fit for the client library use case.\r\n   \r\n   There are many possible ways to fix this by adding/modifying the behaviour of config properties.\r\n   IMO my proposal of directly exposing the setRevocationEnabled() property and disabling the old behaviour \r\n   (i.e setting the system/security properties and calling setRevocationEnabled()  based on the values of the old crl and ocsp ZK properties) by default (depending on branch) is the most straightforward.\r\n   \r\n   The only problem I have with my proposed changes is that old defauit \"false\" value for the old crl and ocsp ZK properties becomes effectively a no-op. We could add a third \"java_default\" like state and default to that, but that would actually behave exactly like the \"false\", so it may not be worth it.\r\n   \r\n   Here are some possible option sets, and the settings for making ZK leave the revaction settings and JVM System/Security proprties alone:\r\n   \r\n   current patch:\r\n   \r\n   ```\r\n   ssl.revocationEnabled: java_default (true/false/java_default/legacy)\r\n   ssl.crl: false (true/false) \r\n   ssl.ocsp: false (true/false)\r\n   ```\r\n   \r\n   Alternative 1 :\r\n   add a third state to ocsp and crl properties, but don't add explicit override for setRevocationEnabled()\r\n   This won't let the user override the system defaults on the custom truststore, so this loses functionality\r\n   \r\n   ```\r\n   ssl.crl: java_default (true/false/java_default)\r\n   ssl.ocsp: java_default (true/false/java_default) \r\n   ```\r\n   \r\n   Alternative 2 :\r\n   add a third state to ocsp and crl properties, and also an explicit override for setRevocationEnabled()\r\n   \r\n   ```\r\n   ssl.revocationEnabled: java_default (true/false/java_default/legacy)\r\n   ssl.crl: java_default (true/false/java_default)\r\n   ssl.ocsp: java_default  (true/false/java/default)\r\n   ```\r\n   \r\n   Alternative 3:\r\n   Separate options for disabling setting global property and revocationEnabled logic\r\n   and only using simple booleans:\r\n   \r\n   ```\r\n   ssl.set.revocation.enabled f (t/f)\r\n   ss.set.revocation.disabled f (t/f)\r\n   ssl.crl: false (true/false)\r\n   ssl.ocsp: false (true/false)\r\n   ssl.crl.populate-java-property: false (t/f)\r\n   ssl.ocsp.populate-java-property: false (t/f)\r\n   ssl.revocation.setRevocatioEnable-based-on-crl-and-ocsp: false (t/f)\r\n   ```\r\n   \r\n   Or some combination of the above.\r\n   \r\n   Which one do you prefer ?\r\n   \n\n\n\n", "created": "2025-08-08T09:01:43.365+0000", "updated": "2025-08-08T09:01:43.365+0000", "started": "2025-08-08T09:01:43.364+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978104", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978222", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3169082765\n\n   @stoty @kezhuw Would you like this patch to be included in the **3.9.4** release?\n\n\n", "created": "2025-08-08T19:28:09.813+0000", "updated": "2025-08-08T19:28:09.813+0000", "started": "2025-08-08T19:28:09.813+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978222", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978224", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3169109085\n\n   Yes,\r\n   Though as discussed, we'd have to use the \"legacy\" deafults in 3.9\n\n\n", "created": "2025-08-08T19:41:57.606+0000", "updated": "2025-08-08T19:41:57.606+0000", "started": "2025-08-08T19:41:57.605+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978224", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978239", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "kezhuw commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3170465635\n\n   > Apart from the single setRevocationEnabled method (which only exists if we install a custom TrustManager), Java only has global settings for handling revocation config.\r\n   \r\n   Turns out, this is not ture.\r\n   \r\n   > The PKIXRevocationChecker is added to a PKIXParameters object using the [addCertPathChecker](https://docs.oracle.com/javase/8/docs/api/java/security/cert/PKIXParameters.html#addCertPathChecker-java.security.cert.PKIXCertPathChecker-) or [setCertPathCheckers](https://docs.oracle.com/javase/8/docs/api/java/security/cert/PKIXParameters.html#setCertPathCheckers-java.util.List-) method, and then the PKIXParameters is passed along with the CertPath to be validated to the [validate](https://docs.oracle.com/javase/8/docs/api/java/security/cert/CertPathValidator.html#validate-java.security.cert.CertPath-java.security.cert.CertPathParameters-) method of a PKIX CertPathValidator. When supplying a revocation checker in this manner, it will be used to check revocation irrespective of the setting of the [RevocationEnabled](https://docs.oracle.com/javase/8/docs/api/java/security/cert/PKIXParameters.html#isRevocationEnabled--) flag.\r\n   >\r\n   > https://docs.oracle.com/javase/8/docs/api/java/security/cert/PKIXRevocationChecker.html\r\n   \r\n   It is this since Java 8. I opened stoty/zookeeper#2 for alternative, see https://github.com/stoty/zookeeper/pull/2/commits/68839ce266b75537b4bb3bfce63bca484a77b94c for changes.\r\n   \r\n   See also:\r\n   * https://docs.oracle.com/javase/8/docs/api/java/security/cert/CertPathValidator.html\r\n   * https://bugs.openjdk.org/browse/JDK-8225433\r\n   * https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/security/cert/PKIXParameters.html#setRevocationEnabled(boolean)\n\n\n", "created": "2025-08-09T07:43:37.362+0000", "updated": "2025-08-09T07:43:37.362+0000", "started": "2025-08-09T07:43:37.361+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978239", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978313", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "stoty commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3173707043\n\n   This is your patch @kezhuw , please approve.\n\n\n", "created": "2025-08-11T08:15:35.268+0000", "updated": "2025-08-11T08:15:35.268+0000", "started": "2025-08-11T08:15:35.267+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978313", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978335", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "kezhuw commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2266359323\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -549,12 +554,21 @@ public static X509TrustManager createTrustManager(\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n             if (crlEnabled || ocspEnabled) {\n\nReview Comment:\n   ```suggestion\r\n               if (crlEnabled) {\r\n   ```\r\n   \r\n   I think we probably should make this consistent how jdk handle \"com.sun.net.ssl.checkRevocation\" and \"ocsp.enable\". Revocation checking will only be enabled through \"com.sun.net.ssl.checkRevocation\" but not \"ocsp.enable\".\n\n\n\n", "created": "2025-08-11T11:05:02.194+0000", "updated": "2025-08-11T11:05:02.194+0000", "started": "2025-08-11T11:05:02.193+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978335", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978336", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "kezhuw commented on code in PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#discussion_r2266363109\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -549,12 +554,21 @@ public static X509TrustManager createTrustManager(\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n             if (crlEnabled || ocspEnabled) {\n\nReview Comment:\n   This should be much important if we are going to default `ssl.crl` and `ssl.ocsp` to `com.sun.net.ssl.checkRevocation` and `ocsp.enable`. @stoty Any thoughts ?\n\n\n\n", "created": "2025-08-11T11:06:47.357+0000", "updated": "2025-08-11T11:06:47.357+0000", "started": "2025-08-11T11:06:47.356+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978336", "issueId": "13625234"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13625234/worklog/978385", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on PR #2289:\nURL: https://github.com/apache/zookeeper/pull/2289#issuecomment-3176041041\n\n   Uh, this is really nasty and way more complicated than I expected. Still trying to fully understand your comments. So, basically the goal is to make the ZooKeeper client completely independent from global system properties (apart from deriving the defaults from them) and set up the revocation on a per-client basis. Is that correct?\n\n\n", "created": "2025-08-11T17:34:26.747+0000", "updated": "2025-08-11T17:34:26.747+0000", "started": "2025-08-11T17:34:26.747+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "978385", "issueId": "13625234"}]}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/4", "id": "4", "description": "An improvement or enhancement to an existing feature or task.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype", "name": "Improvement", "subtask": false, "avatarId": 21140}, "timespent": 26400, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7fbfcc21[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1bb5d32d[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@50608b40[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@657906da[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@39f2ba45[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@14bcd572[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4052762e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6d30e728[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@41bc5859[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@33d91259[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@60e9e10a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@a0a4398[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12310801", "id": "12310801", "key": "ZOOKEEPER", "name": "ZooKeeper", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484", "id": "10484", "description": "Apache ZooKeeper related", "name": "ZooKeeper"}}, "aggregatetimespent": 26400, "customfield_12312520": null, "customfield_12312521": "2025-08-01 06:49:46.0", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": "2025-08-26T19:18:38.000+0000", "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4955/watchers", "watchCount": 1, "isWatching": false}, "created": "2025-08-01T06:49:46.000+0000", "customfield_12310192": null, "customfield_12310191": null, "customfield_12310230": null, "updated": "2025-08-28T03:32:48.000+0000", "timeoriginalestimate": null, "description": "EDIT:\r\n\r\nThe original proposal was rejected, and a different solution is implemented which mimics the JVM internal logic.\r\n\r\n\r\nZookeeper currenlty automatically calls PKIXBuilderParameters#setRevocationEnabled() based on the values of the *ssl.(quorum.)ocsp* and ssl(.quorum).crl config options.\r\n\r\nThis means that if we don't set the above options, then ZK will explicitly disable revocation checks. As those options are also setting global System/Security properties, we do not have a way to enable revocation checks without clobbering the revocation related global properties.\r\n\r\nAdding a new property will let ZK enable/disable revocation checks without clobbering the JVM global properties.", "customfield_10010": null, "timetracking": {"remainingEstimate": "0h", "timeSpent": "7h 20m", "remainingEstimateSeconds": 0, "timeSpentSeconds": 26400}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "Fix intererence with jvm ssl properties for ssl.crl and ssl.ocsp", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [], "maxResults": 0, "total": 0, "startAt": 0}, "customfield_12311820": "0|z1x26w:", "customfield_12314139": null}}