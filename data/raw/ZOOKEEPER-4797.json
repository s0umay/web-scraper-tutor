{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13566605", "self": "https://issues.apache.org/jira/rest/api/2/issue/13566605", "key": "ZOOKEEPER-4797", "fields": {"fixVersions": [], "resolution": null, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "labels": ["pull-request-available"], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": 0, "customfield_12312330": null, "versions": [], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [{"id": "12688035", "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12688035", "type": {"id": "12310560", "name": "Problem/Incident", "inward": "is caused by", "outward": "causes", "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310560"}, "inwardIssue": {"id": "12637274", "key": "ZOOKEEPER-1670", "self": "https://issues.apache.org/jira/rest/api/2/issue/12637274", "fields": {"summary": "zookeeper should set a default value for SERVER_JVMFLAGS and CLIENT_JVMFLAGS so that memory usage is controlled", "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/1", "id": "1", "description": "A problem which impairs or prevents the functions of the product.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype", "name": "Bug", "subtask": false, "avatarId": 21133}}}}], "customfield_12312339": null, "customfield_12313825": null, "assignee": null, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}, "components": [{"self": "https://issues.apache.org/jira/rest/api/2/component/12312384", "id": "12312384", "name": "scripts"}], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": 0, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=fredc", "name": "fredc", "key": "JIRAUSER304004", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Frederiko Costa", "active": true, "timeZone": "America/Los_Angeles"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=fredc", "name": "fredc", "key": "JIRAUSER304004", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Frederiko Costa", "active": true, "timeZone": "America/Los_Angeles"}, "aggregateprogress": {"progress": 13800, "total": 13800, "percent": 100}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 13800, "total": 13800, "percent": 100}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4797/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 23, "worklogs": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902500", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko opened a new pull request, #2120:\nURL: https://github.com/apache/zookeeper/pull/2120\n\n   When running Zk in a containerized environment, it's sometimes desirable to express your heap size in terms of percentage of available memory allocated to a container.\r\n   \r\n   As it stands, zkEnv.sh forces your to have  **-Xmx** set to a value, otherwise it defaults to 1GB. Some environments wanted to set it to more, mostly related to the amount of Ram, not to an absolute value.\r\n   \r\n   This is a request to implement the option of using **-XX:MaxRamPercentage** option when starting zookeeper.\r\n   \r\n   Suggested implementation is to also make a variable **ZK_SERVER_MAXRAMPERCENTAGE** available to be appended to SERVER_JVMFLAGS. If the variable is set, ZK_HEAP_SERVER is ignored, if no ZK_SERVER_MAXRAMPERCENTAGE, ZK_SERVER_HEAP is set as usual.\r\n   \r\n   Example output:\r\n   \r\n   Without any heap size set.\r\n   ```\r\n   ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ....  **-Xmx1000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \r\n   With ZK_SERVER_HEAP set to 2000\r\n   ```\r\n   $ ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ...  **-Xmx2000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \r\n   When ZK_SERVER_MAXRAMPERCENTAGE is added (with or without ZK_SERVER_HEAP)\r\n   ```\r\n   $ ZK_SERVER_MAXRAMPERCENTAGE=30.0 ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd (ZK_SERVER_HEAP is ignored)\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\" ... **-XX:MaxRAMPercentage=30.0**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \n\n\n", "created": "2024-01-30T05:52:07.437+0000", "updated": "2024-01-30T05:52:07.437+0000", "started": "2024-01-30T05:52:07.437+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902500", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902501", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko opened a new pull request, #2121:\nURL: https://github.com/apache/zookeeper/pull/2121\n\n   When running Zk in a containerized environment, it's sometimes desirable to express your heap size in terms of percentage of available memory allocated to a container.\r\n   \r\n   As it stands, zkEnv.sh forces your to have  **-Xmx** set to a value, otherwise it defaults to 1GB. Some environments wanted to set it to more, mostly related to the amount of Ram, not to an absolute value.\r\n   \r\n   This is a request to implement the option of using **-XX:MaxRamPercentage** option when starting zookeeper.\r\n   \r\n   Suggested implementation is to also make a variable **ZK_SERVER_MAXRAMPERCENTAGE** available to be appended to SERVER_JVMFLAGS. If the variable is set, ZK_HEAP_SERVER is ignored, if no ZK_SERVER_MAXRAMPERCENTAGE, ZK_SERVER_HEAP is set as usual.\r\n   \r\n   Example output:\r\n   \r\n   Without any heap size set.\r\n   ```\r\n   ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ....  **-Xmx1000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \r\n   With ZK_SERVER_HEAP set to 2000\r\n   ```\r\n   $ ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ...  **-Xmx2000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \r\n   When ZK_SERVER_MAXRAMPERCENTAGE is added (with or without ZK_SERVER_HEAP)\r\n   ```\r\n   $ ZK_SERVER_MAXRAMPERCENTAGE=30.0 ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd (ZK_SERVER_HEAP is ignored)\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\" ... **-XX:MaxRAMPercentage=30.0**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \n\n\n", "created": "2024-01-30T05:56:39.362+0000", "updated": "2024-01-30T05:56:39.362+0000", "started": "2024-01-30T05:56:39.362+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902501", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902502", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko opened a new pull request, #2122:\nURL: https://github.com/apache/zookeeper/pull/2122\n\n   When running Zk in a containerized environment, it's sometimes desirable to express your heap size in terms of percentage of available memory allocated to a container.\r\n   \r\n   As it stands, zkEnv.sh forces your to have  **-Xmx** set to a value, otherwise it defaults to 1GB. Some environments wanted to set it to more, mostly related to the amount of Ram, not to an absolute value.\r\n   \r\n   This is a request to implement the option of using **-XX:MaxRamPercentage** option when starting zookeeper.\r\n   \r\n   Suggested implementation is to also make a variable **ZK_SERVER_MAXRAMPERCENTAGE** available to be appended to SERVER_JVMFLAGS. If the variable is set, ZK_HEAP_SERVER is ignored, if no ZK_SERVER_MAXRAMPERCENTAGE, ZK_SERVER_HEAP is set as usual.\r\n   \r\n   Example output:\r\n   \r\n   Without any heap size set.\r\n   ```\r\n   ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ....  **-Xmx1000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \r\n   With ZK_SERVER_HEAP set to 2000\r\n   ```\r\n   $ ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ...  **-Xmx2000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \r\n   When ZK_SERVER_MAXRAMPERCENTAGE is added (with or without ZK_SERVER_HEAP)\r\n   ```\r\n   $ ZK_SERVER_MAXRAMPERCENTAGE=30.0 ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd (ZK_SERVER_HEAP is ignored)\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\" ... **-XX:MaxRAMPercentage=30.0**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   ```\r\n   \n\n\n", "created": "2024-01-30T05:57:38.157+0000", "updated": "2024-01-30T05:57:38.157+0000", "started": "2024-01-30T05:57:38.157+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902502", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902506", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko opened a new pull request, #2123:\nURL: https://github.com/apache/zookeeper/pull/2123\n\n   When running Zk in a containerized environment, it's sometimes desirable to express your heap size in terms of percentage of available memory allocated to a container.\r\n   \r\n   As it stands, zkEnv.sh forces your to have -Xmx set to a value, otherwise it defaults to 1GB. Some environments wanted to set it to more, mostly related to the amount of Ram, not to an absolute value.\r\n   \r\n   This is a request to implement the option of using -XX:MaxRamPercentage option when starting zookeeper.\r\n   \r\n   Suggested implementation is to also make a variable ZK_SERVER_MAXRAMPERCENTAGE available to be appended to SERVER_JVMFLAGS. If the variable is set, ZK_HEAP_SERVER is ignored, if no ZK_SERVER_MAXRAMPERCENTAGE, ZK_SERVER_HEAP is set as usual.\r\n   \r\n   Example output:\r\n   \r\n   Without any heap size set.\r\n   \r\n   ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ....  **-Xmx1000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   \r\n   With ZK_SERVER_HEAP set to 2000\r\n   \r\n   $ ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\"  ...  **-Xmx2000m**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   \r\n   When ZK_SERVER_MAXRAMPERCENTAGE is added (with or without ZK_SERVER_HEAP)\r\n   \r\n   $ ZK_SERVER_MAXRAMPERCENTAGE=30.0 ZK_SERVER_HEAP=2000 ./bin/zkServer.sh print-cmd (ZK_SERVER_HEAP is ignored)\r\n   /usr/bin/java\r\n   ZooKeeper JMX enabled by default\r\n   Using config: /home/fsc/src/zookeeper/bin/../conf/zoo.cfg\r\n   \"java\" ... **-XX:MaxRAMPercentage=30.0**   -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain \"/home/fsc/src/zookeeper/bin/../conf/zoo.cfg\" > \"/home/fsc/src/zookeeper/bin/../logs/zookeeper-fsc-server-lap.out\" 2>&1 < /dev/null\r\n   \n\n\n", "created": "2024-01-30T06:01:58.436+0000", "updated": "2024-01-30T06:01:58.436+0000", "started": "2024-01-30T06:01:58.436+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902506", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902509", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko closed pull request #2123: ZOOKEEPER-4797: Allow for -XX:MaxRAMPercentage JVM setting\nURL: https://github.com/apache/zookeeper/pull/2123\n\n\n", "created": "2024-01-30T06:06:22.727+0000", "updated": "2024-01-30T06:06:22.727+0000", "started": "2024-01-30T06:06:22.726+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902509", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902630", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko closed pull request #2121: ZOOKEEPER-4797: Allow for -XX:MaxRAMPercentage JVM setting\nURL: https://github.com/apache/zookeeper/pull/2121\n\n\n", "created": "2024-01-30T13:44:58.329+0000", "updated": "2024-01-30T13:44:58.329+0000", "started": "2024-01-30T13:44:58.328+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902630", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902631", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko commented on PR #2122:\nURL: https://github.com/apache/zookeeper/pull/2122#issuecomment-1916887746\n\n   Yes. The idea was to backport to a legacy version I run. In any case, I will keep the one to master. If approved, will backport to supported versions.\n\n\n", "created": "2024-01-30T13:46:54.105+0000", "updated": "2024-01-30T13:46:54.105+0000", "started": "2024-01-30T13:46:54.104+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902631", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902632", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko closed pull request #2122: ZOOKEEPER-4797: Allow for -XX:MaxRAMPercentage JVM setting\nURL: https://github.com/apache/zookeeper/pull/2122\n\n\n", "created": "2024-01-30T13:47:01.365+0000", "updated": "2024-01-30T13:47:01.365+0000", "started": "2024-01-30T13:47:01.365+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902632", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902654", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on code in PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#discussion_r1471365691\n\n\n##########\nbin/zkEnv.sh:\n##########\n@@ -144,9 +144,15 @@ fi\n \n #echo \"CLASSPATH=$CLASSPATH\"\n \n-# default heap for zookeeper server\n-ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n-export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+# ZK_SERVER_MAXRAMPERCENTAGE has higher precedence over ZK_SERVER_HEAP \n+if [ \"x$ZK_SERVER_MAXRAMPERCENTAGE\" = \"x\" ]\n+then\n+  # default heap for zookeeper server\n+  ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n+  export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+else\n+  export SERVER_JVMFLAGS=\"-XX:MaxRAMPercentage=$ZK_SERVER_MAXRAMPERCENTAGE $SERVER_JVMFLAGS\"\n+fi\n\nReview Comment:\n   This seems like it's a bit overly complex. This file is already a config file. It doesn't need additional configuration options to configure the config file.\r\n   \r\n   Users can just edit this file if they need to tweak it. So, it really should just be as simple as possible, and only as complex as necessary for users to be able to easily set the jvm flags.\r\n   \r\n   I suggest something like this:\r\n   \r\n   ```suggestion\r\n   export SERVER_JVMFLAGS=${SERVER_JVMFLAGS:--Xmx1000m}\r\n   ```\r\n   \r\n   This gets rid of the unneeded ZK_SERVER_HEAP environment variable and bakes the default into the `SERVER_JVMFLAGS variable`, which you can still override, either by editing this file, or by setting `export SERVER_JVMFLAGS='-XX:MaxRAMPercentage=25'` (or whatever value you want) in your environment. I would suggest a similar thing be done for the `CLIENT_JVMFLAGS`.\r\n   \n\n\n\n", "created": "2024-01-30T14:49:57.067+0000", "updated": "2024-01-30T14:49:57.067+0000", "started": "2024-01-30T14:49:57.067+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902654", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902675", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko commented on code in PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#discussion_r1471433341\n\n\n##########\nbin/zkEnv.sh:\n##########\n@@ -144,9 +144,15 @@ fi\n \n #echo \"CLASSPATH=$CLASSPATH\"\n \n-# default heap for zookeeper server\n-ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n-export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+# ZK_SERVER_MAXRAMPERCENTAGE has higher precedence over ZK_SERVER_HEAP \n+if [ \"x$ZK_SERVER_MAXRAMPERCENTAGE\" = \"x\" ]\n+then\n+  # default heap for zookeeper server\n+  ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n+  export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+else\n+  export SERVER_JVMFLAGS=\"-XX:MaxRAMPercentage=$ZK_SERVER_MAXRAMPERCENTAGE $SERVER_JVMFLAGS\"\n+fi\n\nReview Comment:\n   That makes sense, but how to handle users who are already using ZK_SERVER_HEAP to a value other than 1000? Wouldn't they be forced to change to include -Xmx as part of the SERVER_JVMFLAGS as of now? My concern was that it things are set for them for a long time (by the way of ZK_SERVER_HEAP), suddenly they will be setting their heap back to the default value. How should we handle that?\n\n\n\n", "created": "2024-01-30T15:23:30.550+0000", "updated": "2024-01-30T15:23:30.550+0000", "started": "2024-01-30T15:23:30.550+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902675", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902676", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko commented on code in PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#discussion_r1471433341\n\n\n##########\nbin/zkEnv.sh:\n##########\n@@ -144,9 +144,15 @@ fi\n \n #echo \"CLASSPATH=$CLASSPATH\"\n \n-# default heap for zookeeper server\n-ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n-export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+# ZK_SERVER_MAXRAMPERCENTAGE has higher precedence over ZK_SERVER_HEAP \n+if [ \"x$ZK_SERVER_MAXRAMPERCENTAGE\" = \"x\" ]\n+then\n+  # default heap for zookeeper server\n+  ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n+  export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+else\n+  export SERVER_JVMFLAGS=\"-XX:MaxRAMPercentage=$ZK_SERVER_MAXRAMPERCENTAGE $SERVER_JVMFLAGS\"\n+fi\n\nReview Comment:\n   That makes sense, but how to handle users who are already using ZK_SERVER_HEAP to a value other than 1000? Wouldn't they be forced to change to include -Xmx as part of the SERVER_JVMFLAGS as of now? My concern was that it things are set for them for a long time (by the way of ZK_SERVER_HEAP), suddenly they will be setting their heap back to the default value and that would break users deployments, wouldn't it? How should we handle that?\n\n\n\n", "created": "2024-01-30T15:25:05.672+0000", "updated": "2024-01-30T15:25:05.672+0000", "started": "2024-01-30T15:25:05.671+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902676", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/902685", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on code in PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#discussion_r1471474942\n\n\n##########\nbin/zkEnv.sh:\n##########\n@@ -144,9 +144,15 @@ fi\n \n #echo \"CLASSPATH=$CLASSPATH\"\n \n-# default heap for zookeeper server\n-ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n-export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+# ZK_SERVER_MAXRAMPERCENTAGE has higher precedence over ZK_SERVER_HEAP \n+if [ \"x$ZK_SERVER_MAXRAMPERCENTAGE\" = \"x\" ]\n+then\n+  # default heap for zookeeper server\n+  ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n+  export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+else\n+  export SERVER_JVMFLAGS=\"-XX:MaxRAMPercentage=$ZK_SERVER_MAXRAMPERCENTAGE $SERVER_JVMFLAGS\"\n+fi\n\nReview Comment:\n   Could do something like:\r\n   \r\n   ```bash\r\n   if [[ -n $ZK_SERVER_HEAP ]]; then\r\n       echo 'WARNING: ZK_SERVER_HEAP will not be recognized in a future version. Set -Xmx directly using SERVER_JVMFLAGS instead.'\r\n       SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\r\n   fi\r\n   export SERVER_JVMFLAGS=${SERVER_JVMFLAGS:--Xmx1000m}\r\n   ```\n\n\n\n", "created": "2024-01-30T15:44:53.237+0000", "updated": "2024-01-30T15:44:53.237+0000", "started": "2024-01-30T15:44:53.237+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "902685", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/908916", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "dreamcatcherer commented on PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#issuecomment-1985480026\n\n   **ISSUE**: \r\n   when using  `export $SERVER_JVFMLAGS=\"******$SERVER_JVMFLAGS\" ` in `zkEnv.sh`, it will cause  `zkEnv.sh` load variable `$SERVER_JVMFLAGS`  twice when restart `zkEnv.sh`.\r\n   \r\n   This issue will complain error when adding variables containing `-javaagent`\n\n\n", "created": "2024-03-08T10:53:47.481+0000", "updated": "2024-03-08T10:53:47.481+0000", "started": "2024-03-08T10:53:47.481+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "908916", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/908931", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "eolivelli commented on PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#issuecomment-1985639563\n\n   @tisonkun @anmolnar @ztzg PTAL\n\n\n", "created": "2024-03-08T12:51:08.172+0000", "updated": "2024-03-08T12:51:08.172+0000", "started": "2024-03-08T12:51:08.171+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "908931", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/909022", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko commented on PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#issuecomment-1986556246\n\n   > export $SERVER_JVFMLAGS\r\n   \r\n   @dreamcatcherer did I miss something or the ```export $SERVER_JVFMLAGS=\"******$SERVER_JVMFLAGS\"``` should actually be something along the lines of ```export SERVER_JVFMLAGS=\"******$SERVER_JVMFLAGS\"```?\n\n\n", "created": "2024-03-08T23:19:43.571+0000", "updated": "2024-03-08T23:19:43.571+0000", "started": "2024-03-08T23:19:43.571+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "909022", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/909894", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "mortaelth commented on PR #2122:\nURL: https://github.com/apache/zookeeper/pull/2122#issuecomment-1997527201\n\n   I can see that this never made it to master. Is there still a plan to make it?\n\n\n", "created": "2024-03-14T13:59:24.517+0000", "updated": "2024-03-14T13:59:24.517+0000", "started": "2024-03-14T13:59:24.517+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "909894", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/909924", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko commented on PR #2122:\nURL: https://github.com/apache/zookeeper/pull/2122#issuecomment-1997801057\n\n   > I can see that this never made it to master. Is there still a plan to make it?\r\n   \r\n   Not for 3.5, but I suppose #2120 will.\n\n\n", "created": "2024-03-14T16:03:08.072+0000", "updated": "2024-03-14T16:03:08.072+0000", "started": "2024-03-14T16:03:08.072+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "909924", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/930998", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "frederiko commented on PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#issuecomment-2299275508\n\n   Hello, is there some ETA for this to be merged? \n\n\n", "created": "2024-08-20T16:30:18.765+0000", "updated": "2024-08-20T16:30:18.765+0000", "started": "2024-08-20T16:30:18.765+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "930998", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/931207", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "ctubbsii commented on PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#issuecomment-2302613709\n\n   > Hello, is there some ETA for this to be merged?\r\n   \r\n   Sorry, I'm not a committer, so I don't have permission to merge this. If you don't get a response here, you can try pinging the [ZooKeeper developer mailing list](https://zookeeper.apache.org/lists.html).\n\n\n", "created": "2024-08-21T17:31:36.103+0000", "updated": "2024-08-21T17:31:36.103+0000", "started": "2024-08-21T17:31:36.102+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "931207", "issueId": "13566605"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/worklog/931601", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "kezhuw commented on code in PR #2120:\nURL: https://github.com/apache/zookeeper/pull/2120#discussion_r1729655144\n\n\n##########\nbin/zkEnv.sh:\n##########\n@@ -145,9 +145,15 @@ fi\n #echo \"CLASSPATH=$CLASSPATH\"\n \n # default heap for zookeeper server\n-ZK_SERVER_HEAP=\"${ZK_SERVER_HEAP:-1000}\"\n-export SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+if [[ -n $ZK_SERVER_HEAP ]]; then\n+    echo 'WARNING: ZK_SERVER_HEAP will not be recognized in a future version. Set -Xmx directly using SERVER_JVMFLAGS instead.'\n+    SERVER_JVMFLAGS=\"-Xmx${ZK_SERVER_HEAP}m $SERVER_JVMFLAGS\"\n+fi\n+export SERVER_JVMFLAGS=${SERVER_JVMFLAGS:--Xmx1000m}\n\nReview Comment:\n   This breaks ZOOKEEPER-1670, if we custom `SERVER_JVMFLAGS` for propose other than max heap size.\r\n   \r\n   I think our goals are:\r\n   1. Backward compatibility.\r\n   2. Use `SERVER_JVMFLAGS` to custom all jvm flags.\r\n   3. Set max heap size if no related flags (`-Xmx`, `-XX:MaxRAM` and `-XX:MaxRAMPercentage`) configured.\r\n   \r\n   I think we chould **prepend** `-Xmx1000m` only if `SERVER_JVMFLAGS` does not contain `-XX:MaxRAM` to achieve above.\r\n   \r\n   See also for [comments](https://issues.apache.org/jira/browse/ZOOKEEPER-1670?focusedCommentId=13606860&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13606860) from ZOOKEEPER-1670:\r\n   \r\n   > However another problem exists where SERVER_JVMFLAGS is also used to set the jaas configuration file. I feel we need to introduce another variable called ZK_SERVER_HEAP which defaults to 1G and we set the SERVER_JVMFLAGS=\"$ZK_SERVER_HEAP $SERVER_JVMFLAGS\"\r\n   > \r\n   > That way any existing settings user do for heap size still works but will default to 1G if nothing is found.\r\n   \r\n   > >Also many folks are already specifying the heap size using the command line \"SERVER_JVMFLAGS\" parameter. This change will now cause potential problems as the new defaults may override the SERVER_JVMFLAGS settings already in place.\r\n   >\r\n   > I dont think this is true as SERVER_JVMFLAGS is at the end. So if you were specifying the heap size using SERVER_JVMFLAGS it should still be applied as the last heap size setting is what will be the picked up.\r\n   \n\n\n\n", "created": "2024-08-24T02:03:18.052+0000", "updated": "2024-08-24T02:03:18.052+0000", "started": "2024-08-24T02:03:18.052+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "931601", "issueId": "13566605"}]}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/4", "id": "4", "description": "An improvement or enhancement to an existing feature or task.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype", "name": "Improvement", "subtask": false, "avatarId": 21140}, "timespent": 13800, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@636aeb01[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3f75b622[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@399248d9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2b442d6f[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7ceab7c5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5593b881[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7eecf66a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@74c9838d[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5d34464e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@152bbad9[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@c6d51b0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@34807e5b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12310801", "id": "12310801", "key": "ZOOKEEPER", "name": "ZooKeeper", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484", "id": "10484", "description": "Apache ZooKeeper related", "name": "ZooKeeper"}}, "aggregatetimespent": 13800, "customfield_12312520": null, "customfield_12312521": "Tue Jan 30 14:54:04 UTC 2024", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": null, "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4797/watchers", "watchCount": 3, "isWatching": false}, "created": "2024-01-30T00:27:53.000+0000", "customfield_12310192": null, "customfield_12310191": null, "customfield_12310230": null, "updated": "2024-09-11T18:50:39.000+0000", "timeoriginalestimate": null, "description": "When running Zk in a containerized environment, it's sometimes desirable to express your heap size in terms of percentage of available memory allocated to a container.\r\n\r\nAs it stands, zkEnv.sh forces your to have -Xmx, which defaults to 1GB. Some environments wanted to set it to more, mostly related to the amount of Ram.\r\n\r\nThis is a request to implement the option of using -XX:MaxRamPercentage option when starting zookeeper.\r\n\r\nSuggested implementation is to also make a variable ZK_SERVER_MAXRAMPERCENTAGE available to be added to SERVER_JVMFLAGS. If the variable is set, ZK_HEAP_SERVER is ignored, if no ZK_SERVER_MAXRAMPERCENTAGE, ZK_SERVER_HEAP is set as usual.", "customfield_10010": null, "timetracking": {"remainingEstimate": "0h", "timeSpent": "3h 50m", "remainingEstimateSeconds": 0, "timeSpentSeconds": 13800}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "Allow for -XX:MaxRAMPercentage JVM setting", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13566605/comment/17812352", "id": "17812352", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii", "name": "ctubbsii", "key": "ctubbsii", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"}, "displayName": "Christopher Tubbs", "active": true, "timeZone": "America/New_York"}, "body": "I don't see this property as particularly special over other JVM flags. The only thing that makes Xmx special is how common it is. The percentage option is not nearly as common. It doesn't make sense to add an option for every little thing users might set. Instead, it'd be better to make it simple and easy for users to set anything they want. Also, there's value in keeping this config file simple, so it can be easily edited by anybody who needs to do something unique, rather than bake in complexity to handle a variety of scenarios.\r\n\r\nSee my suggestion in https://github.com/apache/zookeeper/pull/2120#pullrequestreview-1851494424", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii", "name": "ctubbsii", "key": "ctubbsii", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"}, "displayName": "Christopher Tubbs", "active": true, "timeZone": "America/New_York"}, "created": "2024-01-30T14:54:04.493+0000", "updated": "2024-01-30T14:54:04.493+0000"}], "maxResults": 1, "total": 1, "startAt": 0}, "customfield_12311820": "0|z1n2u0:", "customfield_12314139": null}}