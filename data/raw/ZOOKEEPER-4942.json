{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13621201", "self": "https://issues.apache.org/jira/rest/api/2/issue/13621201", "key": "ZOOKEEPER-4942", "fields": {"fixVersions": [], "resolution": {"self": "https://issues.apache.org/jira/rest/api/2/resolution/10005", "id": "10005", "description": "Workaround", "name": "Workaround"}, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "labels": ["pull-request-available"], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": 0, "customfield_12312330": null, "versions": [], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [{"id": "12705366", "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12705366", "type": {"id": "12310460", "name": "Child-Issue", "inward": "is a child of", "outward": "is a parent of", "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310460"}, "inwardIssue": {"id": "13622681", "key": "ZOOKEEPER-4949", "self": "https://issues.apache.org/jira/rest/api/2/issue/13622681", "fields": {"summary": "Clean up TLS CRL/OCSP configuration", "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/4", "id": "4", "description": "An improvement or enhancement to an existing feature or task.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype", "name": "Improvement", "subtask": false, "avatarId": 21140}}}}, {"id": "12704673", "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12704673", "type": {"id": "10030", "name": "Reference", "inward": "is related to", "outward": "relates to", "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"}, "inwardIssue": {"id": "13621181", "key": "ZOOKEEPER-4941", "self": "https://issues.apache.org/jira/rest/api/2/issue/13621181", "fields": {"summary": "Serveral SSL properties ignored when custom trustore is not specified", "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/1", "id": "1", "description": "A problem which impairs or prevents the functions of the product.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype", "name": "Bug", "subtask": false, "avatarId": 21133}}}}], "customfield_12312339": null, "customfield_12313825": null, "assignee": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "components": [{"self": "https://issues.apache.org/jira/rest/api/2/component/12329414", "id": "12329414", "name": "security"}], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": 0, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "aggregateprogress": {"progress": 2400, "total": 2400, "percent": 100}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 2400, "total": 2400, "percent": 100}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4942/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 4, "worklogs": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13621201/worklog/972999", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on code in PR #2271:\nURL: https://github.com/apache/zookeeper/pull/2271#discussion_r2163666292\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -548,17 +548,19 @@ public static X509TrustManager createTrustManager(\n         try {\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n-            if (crlEnabled || ocspEnabled) {\n-                pbParams.setRevocationEnabled(true);\n-                System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n-                System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n-                if (ocspEnabled) {\n-                    Security.setProperty(\"ocsp.enable\", \"true\");\n-                }\n-            } else {\n-                pbParams.setRevocationEnabled(false);\n+            // Leave CRL/OCSP JVM global properties alone both are set to \"system\" (represented as null)\n+            if (!crlEnabled.isSystem() || !ocspEnabled.isSystem()) {\n+\t            if (crlEnabled.isTrue() || ocspEnabled.isTrue()) {\n+\t                pbParams.setRevocationEnabled(true);\n+\t                System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n+\t                System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n+\t                if (ocspEnabled.isTrue()) {\n+\t                    Security.setProperty(\"ocsp.enable\", \"true\");\n+\t                }\n+\t            } else {\n+\t                pbParams.setRevocationEnabled(false);\n+\t            }\n\nReview Comment:\n   One question here:\r\n   In the case when both parameters are set to 'system', we won't do anything: not altering system properties and not setting revocation in `pbParams`. Will that work correctly, I mean will `pbParams` revocation flag follow the system settings?\n\n\n\n", "created": "2025-06-24T11:07:58.886+0000", "updated": "2025-06-24T11:07:58.886+0000", "started": "2025-06-24T11:07:58.885+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "972999", "issueId": "13621201"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621201/worklog/973000", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on code in PR #2271:\nURL: https://github.com/apache/zookeeper/pull/2271#discussion_r2163676682\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -548,17 +548,19 @@ public static X509TrustManager createTrustManager(\n         try {\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n-            if (crlEnabled || ocspEnabled) {\n-                pbParams.setRevocationEnabled(true);\n-                System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n-                System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n-                if (ocspEnabled) {\n-                    Security.setProperty(\"ocsp.enable\", \"true\");\n-                }\n-            } else {\n-                pbParams.setRevocationEnabled(false);\n+            // Leave CRL/OCSP JVM global properties alone both are set to \"system\" (represented as null)\n+            if (!crlEnabled.isSystem() || !ocspEnabled.isSystem()) {\n+\t            if (crlEnabled.isTrue() || ocspEnabled.isTrue()) {\n+\t                pbParams.setRevocationEnabled(true);\n+\t                System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n+\t                System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n+\t                if (ocspEnabled.isTrue()) {\n+\t                    Security.setProperty(\"ocsp.enable\", \"true\");\n+\t                }\n+\t            } else {\n+\t                pbParams.setRevocationEnabled(false);\n+\t            }\n\nReview Comment:\n   Doc:\r\n   > When a PKIXParameters object is created, this flag is set to true. This setting reflects the most common strategy for checking revocation, since each service provider must support revocation checking to be PKIX compliant. Sophisticated applications should set this flag to false when it is not practical to use a PKIX service provider's default revocation checking mechanism or when an alternative revocation checking mechanism is to be substituted (by also calling the addCertPathChecker or setCertPathCheckers methods).\n\n\n\n", "created": "2025-06-24T11:11:05.200+0000", "updated": "2025-06-24T11:11:05.200+0000", "started": "2025-06-24T11:11:05.199+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "973000", "issueId": "13621201"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621201/worklog/973001", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "anmolnar commented on code in PR #2271:\nURL: https://github.com/apache/zookeeper/pull/2271#discussion_r2163676682\n\n\n##########\nzookeeper-server/src/main/java/org/apache/zookeeper/common/X509Util.java:\n##########\n@@ -548,17 +548,19 @@ public static X509TrustManager createTrustManager(\n         try {\n             KeyStore ts = loadTrustStore(trustStoreLocation, trustStorePassword, trustStoreTypeProp);\n             PKIXBuilderParameters pbParams = new PKIXBuilderParameters(ts, new X509CertSelector());\n-            if (crlEnabled || ocspEnabled) {\n-                pbParams.setRevocationEnabled(true);\n-                System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n-                System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n-                if (ocspEnabled) {\n-                    Security.setProperty(\"ocsp.enable\", \"true\");\n-                }\n-            } else {\n-                pbParams.setRevocationEnabled(false);\n+            // Leave CRL/OCSP JVM global properties alone both are set to \"system\" (represented as null)\n+            if (!crlEnabled.isSystem() || !ocspEnabled.isSystem()) {\n+\t            if (crlEnabled.isTrue() || ocspEnabled.isTrue()) {\n+\t                pbParams.setRevocationEnabled(true);\n+\t                System.setProperty(\"com.sun.net.ssl.checkRevocation\", \"true\");\n+\t                System.setProperty(\"com.sun.security.enableCRLDP\", \"true\");\n+\t                if (ocspEnabled.isTrue()) {\n+\t                    Security.setProperty(\"ocsp.enable\", \"true\");\n+\t                }\n+\t            } else {\n+\t                pbParams.setRevocationEnabled(false);\n+\t            }\n\nReview Comment:\n   Doc:\r\n   > If this flag is true, the default revocation checking mechanism of the underlying PKIX service provider will be used\r\n   \r\n   > When a PKIXParameters object is created, this flag is set to true. This setting reflects the most common strategy for checking revocation, since each service provider must support revocation checking to be PKIX compliant. Sophisticated applications should set this flag to false when it is not practical to use a PKIX service provider's default revocation checking mechanism or when an alternative revocation checking mechanism is to be substituted (by also calling the addCertPathChecker or setCertPathCheckers methods).\n\n\n\n", "created": "2025-06-24T11:11:41.182+0000", "updated": "2025-06-24T11:11:41.182+0000", "started": "2025-06-24T11:11:41.181+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "973001", "issueId": "13621201"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621201/worklog/973430", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "comment": "Seanhom opened a new pull request, #2275:\nURL: https://github.com/apache/zookeeper/pull/2275\n\n   1. Improved error handling for read() failures\r\n   2. Enhanced backup randomness by combining current time with PID\r\n   3. Fixed potential infinite loop when read() returns error\n\n\n", "created": "2025-07-01T08:34:35.289+0000", "updated": "2025-07-01T08:34:35.289+0000", "started": "2025-07-01T08:34:35.287+0000", "timeSpent": "10m", "timeSpentSeconds": 600, "id": "973430", "issueId": "13621201"}]}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/1", "id": "1", "description": "A problem which impairs or prevents the functions of the product.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype", "name": "Bug", "subtask": false, "avatarId": 21133}, "timespent": 2400, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7557ab62[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c57b0a3[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@624539a2[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@13664fe1[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3f714944[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@198fd542[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@524c67f8[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@73f42317[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@467a7f44[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@21b8870c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@107a5764[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@424432e7[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12310801", "id": "12310801", "key": "ZOOKEEPER", "name": "ZooKeeper", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484", "id": "10484", "description": "Apache ZooKeeper related", "name": "ZooKeeper"}}, "aggregatetimespent": 2400, "customfield_12312520": null, "customfield_12312521": "Thu Aug 07 05:32:15 UTC 2025", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": "2025-08-07T05:32:30.000+0000", "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4942/watchers", "watchCount": 1, "isWatching": false}, "created": "2025-06-18T08:17:04.000+0000", "customfield_12310192": null, "customfield_12310191": null, "customfield_12310230": null, "updated": "2025-08-07T05:32:30.000+0000", "timeoriginalestimate": null, "description": "The current behaviour is to overwrite the JVM global TLS certification revocation properties based on ZK configuration.\r\n\r\nThis is a bad idea, as ZK is unlikely to be the only thing running in the JVM (unless it is the ZK server process), and the ZK settings (Even the OCSP/CRL disabled default settings) will apply to ALL connections in the JVM.\r\n\r\nIdeally, ZK would just leave these properties alone, but that would break backwards compatibility.\r\n\r\nI propose the following fixes:\r\n\r\nA. Change the default behaviour, so that if the _zookeeper.ssl.ocsp_ _zookeeper.ssl.crl_ properties are not defined then ZK skips changing the certificate revocation related global settings, and relies on the JVM System/Security properties.\r\n\r\nB. Change the default behaviour, so that if the _zookeeper.ssl.ocsp_ _zookeeper.ssl.crl_ properties are set to a specific value (i.e. \"system\") ZK skips changing the certificate revocation related global settings, and relies on the JVM System/Security properties.\r\n\r\nOption A. would be the more secure, as it doesn't overwrite the system settings, but it does break backwards compatibiliry with existing ZK versions.\r\n\r\nOption B. is less secure, as it requires explicit configuration not to clobber the JVM global settings, but it is fully backwards compatible with existing configurations.\r\n", "customfield_10010": null, "timetracking": {"remainingEstimate": "0h", "timeSpent": "40m", "remainingEstimateSeconds": 0, "timeSpentSeconds": 2400}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "Add option to preserve JVM TLS certification revocation properties", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13621201/comment/17981699", "id": "17981699", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "body": "FYI [~andor]", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "created": "2025-06-18T08:23:13.816+0000", "updated": "2025-06-18T08:23:13.816+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621201/comment/18012474", "id": "18012474", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "body": "As noted by [~andor] , this can be achieved by simply setting the revocation related config properties to their default (false) setting, so this is not really necessary.\r\n\r\nThe new per-trustore revocation checking property makes this redundant.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stoty", "name": "stoty", "key": "stoty", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stoty&avatarId=42544", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stoty&avatarId=42544", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stoty&avatarId=42544", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stoty&avatarId=42544"}, "displayName": "Istvan Toth", "active": true, "timeZone": "Europe/Budapest"}, "created": "2025-08-07T05:32:15.849+0000", "updated": "2025-08-07T05:32:15.849+0000"}], "maxResults": 2, "total": 2, "startAt": 0}, "customfield_12311820": "0|z1wdq0:", "customfield_12314139": null}}