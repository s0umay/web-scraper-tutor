{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13599621", "self": "https://issues.apache.org/jira/rest/api/2/issue/13599621", "key": "ZOOKEEPER-4888", "fields": {"fixVersions": [], "resolution": null, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "labels": [], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": null, "customfield_12312330": null, "versions": [{"self": "https://issues.apache.org/jira/rest/api/2/version/12353694", "id": "12353694", "description": "", "name": "3.9.2", "archived": false, "released": true, "releaseDate": "2024-03-12"}], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [], "customfield_12312339": null, "customfield_12313825": null, "assignee": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=andor", "name": "andor", "key": "andorm", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"}, "displayName": "Andor Molnar", "active": true, "timeZone": "Europe/Budapest"}, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}, "components": [], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": null, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=jeetennalawade", "name": "jeetennalawade", "key": "JIRAUSER307838", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Jeetendra N", "active": true, "timeZone": "Etc/UTC"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=jeetennalawade", "name": "jeetennalawade", "key": "JIRAUSER307838", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Jeetendra N", "active": true, "timeZone": "Etc/UTC"}, "aggregateprogress": {"progress": 0, "total": 0}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 0, "total": 0}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4888/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 0, "worklogs": []}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/1", "id": "1", "description": "A problem which impairs or prevents the functions of the product.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype", "name": "Bug", "subtask": false, "avatarId": 21133}, "timespent": null, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7097818a[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4f69ce61[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7785bd5b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@761e6f0c[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@76462700[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@5a3b4802[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@e497b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@56d2079[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@42d479f3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@422f42f3[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@30189e5c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5c1a1ece[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12310801", "id": "12310801", "key": "ZOOKEEPER", "name": "ZooKeeper", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484", "id": "10484", "description": "Apache ZooKeeper related", "name": "ZooKeeper"}}, "aggregatetimespent": null, "customfield_12312520": null, "customfield_12312521": "Thu Nov 28 14:07:09 UTC 2024", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": null, "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-4888/watchers", "watchCount": 4, "isWatching": false}, "created": "2024-11-22T02:22:00.000+0000", "customfield_12310192": null, "customfield_12310191": null, "customfield_12310230": null, "updated": "2025-09-09T18:13:44.000+0000", "timeoriginalestimate": null, "description": "We upgraded Zookeeper ensemble from 3.9.1 to 3.9.2. TLS (node-node, client-node) is enabled before upgrade. Everything was working fine before upgrade.\r\n\r\nPost upgrade ->\r\n # Stopped everything (all ZK nodes)\r\n # Started all ZK nodes\r\n # Checked if SSL is happening between ZK nodes is fine or not\r\n # Its confirmed that SSL is working fine between ZK nodes.\r\n # Now started just one instance of client application\r\n # Post that we see intermittent successful & unsuccessful handshake messages in ZK logs. \r\n\r\n*ZK server side, we see below messages:*\r\n\r\n2024-11-21 13:28:15,586 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.c.X509Util@599] - FIPS mode is ON: selecting standard x509 trust manager com.ibm.jsse2.br@4362299c\r\n2024-11-21 13:28:15,586 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.c.X509Util@644] - Using Java8 optimized cipher suites for Java version 1.8\r\n2024-11-21 13:28:15,588 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxnFactory@596] - SSL handler added for channel: [id: 0x2443db1c, L:/10.1.10.50:2181 - R:/10.1.10.46:57272]\r\n2024-11-21 13:28:15,620 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxnFactory$CertificateVerifier@415] - *Successful handshake with session 0x0*\r\n2024-11-21 13:28:15,620 [myid:] - DEBUG [epollEventLoopGroup-4-9:i.n.h.s.SslHandler@1934] - [id: 0x2443db1c, L:/10.1.10.50:2181 - R:/10.1.10.46:57272] HANDSHAKEN: protocol:TLSv1.3 cipher suite:TLS_AES_256_GCM_SHA384\r\n2024-11-21 13:28:15,622 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxnFactory$CnxnChannelHandler@350] - New message PooledUnsafeDirectByteBuf(ridx: 0, widx: 4, cap: 42) from [id: 0x2443db1c, L:/10.1.10.50:2181 - R:/10.1.10.46:57272]\r\n2024-11-21 13:28:15,622 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@368] - 0x0 queuedBuffer: null\r\n2024-11-21 13:28:15,622 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@386] - not throttled\r\n2024-11-21 13:28:15,623 [myid:] - INFO  [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@311] - Processing mntr command from /10.1.10.46:57272\r\n2024-11-21 13:28:15,642 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:15,642 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@131] - close in progress for session id: 0x0\r\n2024-11-21 13:28:15,644 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:15,644 [myid:] - DEBUG [epollEventLoopGroup-4-9:o.a.z.s.NettyServerCnxn@124] - cnxns size:0\r\n\r\n2024-11-21 13:28:17,155 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.c.X509Util@599] - FIPS mode is ON: selecting standard x509 trust manager com.ibm.jsse2.br@a5cca67c\r\n2024-11-21 13:28:17,156 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.c.X509Util@644] - Using Java8 optimized cipher suites for Java version 1.8\r\n2024-11-21 13:28:17,158 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxnFactory@596] - SSL handler added for channel: [id: 0xb818882d, L:/10.1.10.50:2181 - R:/10.1.10.46:57276]\r\n2024-11-21 13:28:17,161 [myid:] - ERROR [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxnFactory$CertificateVerifier@466] - *Unsuccessful handshake with session 0x0*\r\n2024-11-21 13:28:17,161 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:17,162 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@124] - cnxns size:0\r\n2024-11-21 13:28:17,163 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@113] - close called for session id: 0x0\r\n2024-11-21 13:28:17,163 [myid:] - DEBUG [epollEventLoopGroup-4-10:o.a.z.s.NettyServerCnxn@124] - cnxns size:0\r\n\r\n \r\n\r\n*At client side, we see below message intermittently.*\r\n\r\n17:37:43.878 [pool-7-thread-1-SendThread(10.1.10.50:2181)] WARN org.apache.zookeeper.ClientCnxn - Session 0x0 for server bdc-dev1807.in.syncsort.dev/10.1.10.50:2181, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.\r\norg.apache.zookeeper.ClientCnxn$EndOfStreamException: channel for sessionid 0x0 is lost\r\n        at org.apache.zookeeper.ClientCnxnSocketNetty.doTransport(ClientCnxnSocketNetty.java:287)\r\n        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1274)\r\n\r\n*We also see successful SSL connections from client side as well*\r\n\r\nINFO: Connected via SSL to server : 10.1.10.50 @ port : 2181\r\nNov 21, 2024 5:46:04 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.46 @ port : 2181\r\nNov 21, 2024 5:46:09 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.46 @ port : 2181\r\nNov 21, 2024 5:46:09 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.50 @ port : 2181\r\nNov 21, 2024 5:46:14 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.46 @ port : 2181\r\nNov 21, 2024 5:46:14 PM com.ibm.mailbox.zkwatchdog.ZKCommandClient connect\r\nINFO: Connected via SSL to server : 10.1.10.50 @ port : 2181\r\n\r\n*We have not set  any TLS protocol version or Ciphers at client or server side.*\r\n\r\n*We are using IBM JDK 8.*\r\n\r\nPlease help troubleshoot this issue", "customfield_10010": null, "timetracking": {}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "Issues with TLS post upgrade from 3.9.1 to 3.9.2", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13599621/comment/17900336", "id": "17900336", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=jeetennalawade", "name": "jeetennalawade", "key": "JIRAUSER307838", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Jeetendra N", "active": true, "timeZone": "Etc/UTC"}, "body": "We have one more observation. Configured client to use TLS 1.3 and no issues observed.\r\n\r\nzkclient.ssl.protocol=TLSv1.3\r\nzkclient.ssl.ciphers=TLS_AES_256_GCM_SHA384,TLS_CHACHA20_POLY1305_SHA256,TLS_AES_128_GCM_SHA256\r\n\r\nNo changes made at ZK server side.\r\n\r\nThis seems a behavior change from ZK 3.9.1 to 3.9.2 (In our environment, we used same IBM JDK 8  for 3.9.1 and 3.9.2). With 3.9.1, it was working without any of the changes. With 3.9.2, does it only allows only TLS 1.3 out of the box and need to be configured explicitly to use other TLS versions?\r\n\r\n ", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=jeetennalawade", "name": "jeetennalawade", "key": "JIRAUSER307838", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Jeetendra N", "active": true, "timeZone": "Etc/UTC"}, "created": "2024-11-22T11:27:46.540+0000", "updated": "2024-11-22T11:27:46.540+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13599621/comment/17901717", "id": "17901717", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=aayushgupta", "name": "aayushgupta", "key": "JIRAUSER307837", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Aayush Gupta", "active": true, "timeZone": "Etc/UTC"}, "body": "Please find the attached zookeeper.out logs. There is no error printing around these logs. \r\nThe unsuccessful handshake doesn't print any error logs around it.\r\nUnsuccessful handshake error is coming intermittently. \r\n\r\nAt line #130135 : you can see the Unsuccessful handshake\r\nAt line #130143 : You can see a successful handshake. \r\n\r\n\r\nWhat's the client's version?  -> We are using the same zookeeper version at the client side (3.9.2). \r\nWe didn't change the configuration in the zoo.cfg file during upgrade. \r\n\r\nYou can find the below logs as well in the log file attached to this email at line #7 . \r\n2024-11-28 13:59:45,908 [myid:] - INFO  [main:o.a.z.c.X509Util@110] - Default TLS protocol is TLSv1.3, supported TLS protocols are [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv2Hello]", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=aayushgupta", "name": "aayushgupta", "key": "JIRAUSER307837", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Aayush Gupta", "active": true, "timeZone": "Etc/UTC"}, "created": "2024-11-28T13:12:22.579+0000", "updated": "2024-11-28T13:12:22.579+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13599621/comment/17901732", "id": "17901732", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=guminy", "name": "guminy", "key": "guminy", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Scott Guminy", "active": true, "timeZone": "America/New_York"}, "body": "[~andor] \r\n\r\nI work with Aayush and Jeetendra.  I investigated this a bit more and have some ideas on the cause of this issue.\r\n\r\nThe IBM JDK uses different cipher names internally compared to other JDK implementations.  You can see that information here [https://www.ibm.com/docs/en/sdk-java-technology/8?topic=suites-cipher]  Specifically some cipher names start with SSL_ instead of TLS_.  If you call SSLServerSocketFactory.getDefault()).getSupportedCipherSuites(), these ciphers will be returned with SSL_.\r\n\r\nWhy is this a problem for ZooKeeper?\r\n\r\nIn X509Util, there are several methods that return lists of ciphers that ZK wants to use (getTLSv13Ciphers, getGCMCiphers, getCBCCiphers).  These ciphers start with TLS_.  Later in the getSupportedCiphers method, ZK filters out unsupported ciphers by comparing the hardcoded lists to what the JDK's  SSLServerSocketFactory.getDefault()).getSupportedCipherSuites() method returns.  For the IBM JDK, there's little overlap due to the naming differences, and this results in no TLS 1.2 ciphers in the list.  This makes it impossible for any clients to connect with TLS 1.2.\r\n\r\nThe solution is to add the SSL_ ciphers in the getTLSv13Ciphers (maybe not needed), getGCMCiphers, getCBCCiphers methods, to properly support the IBM JDK.  Or an even better would be to not hardcode any ciphers.  This will be helpful for longer term maintenance of this code (new ciphers added, new TLS versions added, etc).", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=guminy", "name": "guminy", "key": "guminy", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Scott Guminy", "active": true, "timeZone": "America/New_York"}, "created": "2024-11-28T14:07:09.836+0000", "updated": "2024-11-28T14:11:32.911+0000"}], "maxResults": 3, "total": 3, "startAt": 0}, "customfield_12311820": "0|z1spaw:", "customfield_12314139": null}}