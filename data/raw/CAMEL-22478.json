{"expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields", "id": "13630413", "self": "https://issues.apache.org/jira/rest/api/2/issue/13630413", "key": "CAMEL-22478", "fields": {"fixVersions": [{"self": "https://issues.apache.org/jira/rest/api/2/version/12356295", "id": "12356295", "description": "Nov 2025", "name": "4.16.0", "archived": false, "released": false}], "resolution": {"self": "https://issues.apache.org/jira/rest/api/2/resolution/1", "id": "1", "description": "A fix for this issue is checked into the tree and tested.", "name": "Fixed"}, "customfield_12312322": null, "customfield_12312323": null, "customfield_12310420": "9223372036854775807", "customfield_12312320": null, "customfield_12312321": null, "customfield_12312328": null, "customfield_12312329": null, "customfield_12312326": null, "customfield_12310300": null, "customfield_12312327": null, "customfield_12312324": null, "customfield_12312720": null, "customfield_12312325": null, "lastViewed": null, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/4", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg", "name": "Minor", "id": "4"}, "labels": [], "customfield_12312333": null, "customfield_12312334": null, "customfield_12313422": "false", "customfield_12310310": "0.0", "customfield_12312331": null, "customfield_12312332": null, "aggregatetimeoriginalestimate": null, "timeestimate": null, "customfield_12312330": null, "versions": [], "customfield_12311120": null, "customfield_12313826": null, "issuelinks": [], "customfield_12312339": null, "customfield_12313825": null, "assignee": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "customfield_12312337": null, "customfield_12313823": null, "customfield_12312338": null, "customfield_12311920": null, "customfield_12313822": null, "customfield_12312335": null, "customfield_12313821": null, "customfield_12312336": null, "customfield_12313820": null, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/6", "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png", "name": "Closed", "id": "6", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}, "components": [], "archiveddate": null, "customfield_12312026": null, "customfield_12312023": null, "customfield_12312024": null, "aggregatetimeestimate": null, "customfield_12312022": null, "customfield_12310921": null, "customfield_12310920": "9223372036854775807", "customfield_12312823": null, "creator": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "subtasks": [], "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "aggregateprogress": {"progress": 0, "total": 0}, "customfield_12313520": null, "customfield_12310250": null, "progress": {"progress": 0, "total": 0}, "customfield_12313924": null, "votes": {"self": "https://issues.apache.org/jira/rest/api/2/issue/CAMEL-22478/votes", "votes": 0, "hasVoted": false}, "worklog": {"startAt": 0, "maxResults": 20, "total": 0, "worklogs": []}, "archivedby": null, "customfield_12313920": null, "issuetype": {"self": "https://issues.apache.org/jira/rest/api/2/issuetype/3", "id": "3", "description": "A task that needs to be done.", "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype", "name": "Task", "subtask": false, "avatarId": 21148}, "timespent": null, "customfield_12314020": "{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@2b5ca47c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@57d7de28[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@751063c4[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@1c5fc5d0[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@65696bbb[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@54052581[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@227d6286[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@406e525c[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6e74dd59[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1320d43b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5a80ed8b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@684eb835[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}", "customfield_12314141": null, "customfield_12314140": null, "project": {"self": "https://issues.apache.org/jira/rest/api/2/project/12311211", "id": "12311211", "key": "CAMEL", "name": "Camel", "projectTypeKey": "software", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311211&avatarId=10011", "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311211&avatarId=10011", "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311211&avatarId=10011", "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311211&avatarId=10011"}, "projectCategory": {"self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10482", "id": "10482", "description": "", "name": "Camel"}}, "customfield_12310060": {"self": "https://issues.apache.org/jira/rest/api/2/customFieldOption/10060", "value": "Unknown", "id": "10060", "disabled": false}, "aggregatetimespent": null, "customfield_12312520": null, "customfield_12312521": "Wed Oct 22 08:23:58 UTC 2025", "customfield_12314422": null, "customfield_12314421": null, "customfield_12314146": null, "customfield_12314420": null, "customfield_12314145": null, "customfield_12314144": null, "customfield_12314143": null, "resolutiondate": "2025-10-22T08:04:50.000+0000", "workratio": -1, "customfield_12312923": null, "customfield_12312920": null, "customfield_12312921": null, "watches": {"self": "https://issues.apache.org/jira/rest/api/2/issue/CAMEL-22478/watchers", "watchCount": 2, "isWatching": false}, "created": "2025-10-01T07:12:25.000+0000", "updated": "2025-10-22T08:23:58.000+0000", "timeoriginalestimate": null, "description": "Now that we have introduced a simpler MDC mechanism we can introduce some parameter in all telemetry components and make it easier for the user to include traceid/spanid MDC information. In the past we had to deprecate this as we had no support for the context propagation. With the new component, this is now consistent and we can provide the feature ootb by simply adding those Exchange headers.", "customfield_10010": null, "timetracking": {}, "customfield_12314523": null, "customfield_12314127": null, "customfield_12314522": null, "customfield_12314126": null, "customfield_12314521": null, "customfield_12314125": null, "customfield_12314520": null, "customfield_12314124": null, "customfield_12312340": null, "attachment": [], "customfield_12314123": null, "customfield_12312341": null, "customfield_12312220": null, "customfield_12314122": null, "customfield_12314121": null, "customfield_12310041": null, "customfield_12314120": null, "customfield_12314129": null, "customfield_12314524": null, "customfield_12314128": null, "summary": "[camel-telemetry] Introduce traceid/spanid exchange headers", "customfield_12314130": null, "customfield_12310291": null, "customfield_12310290": null, "customfield_12311024": null, "customfield_12314138": null, "customfield_12314137": null, "environment": null, "customfield_12314136": null, "customfield_12314135": null, "customfield_12311020": null, "customfield_12314134": null, "duedate": null, "customfield_12314132": null, "customfield_12314131": null, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13630413/comment/18029870", "id": "18029870", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=skin27", "name": "skin27", "key": "skin27", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Raymond", "active": true, "timeZone": "Etc/UTC"}, "body": "Some questions on this issue:\r\n\r\n1. How does the traceid differs from the breadcrumbid?\r\n2. Is it useful to put it in the headers that users are using, or is it better to have as exchangeProperties or somewhere as a separate exchange parameter where it doesn't affect the message.\r\n3. Will this traceid stay within the Camel context, or does it also travel outside (for example when using ActiveMQ or calling a HTTP endpoint)?\r\n4. Will the traceid also be used outside MDC/Logging, for example for tracing of messages?", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=skin27", "name": "skin27", "key": "skin27", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Raymond", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-14T19:01:21.731+0000", "updated": "2025-10-14T19:01:21.731+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13630413/comment/18029982", "id": "18029982", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "body": "This one is only about the possibility to expose the information created by the telemetry choice (whichever it is). I think could be useful for those users that want to visually see by looking at the log (via MDC tracing). Nothing else will change. The context propagation will continue as it normally does as that one is a feature of the telemetry component. I have no strong opinion where to put that, if in headers or properties. I am curious to know what would be the pro and cons in each case, do you have any in particular?\r\n\r\nAbout the difference between this and breadcrumid, I think that it is about who is generating such UID. In this feature case it's generated by the telemetry engine, not by Camel (as I understand it happens for breadcrumb).", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "created": "2025-10-15T06:51:38.460+0000", "updated": "2025-10-15T06:51:38.460+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13630413/comment/18030184", "id": "18030184", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=skin27", "name": "skin27", "key": "skin27", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Raymond", "active": true, "timeZone": "Etc/UTC"}, "body": "OK, thanks for clearing things up.\r\n\r\nOn the question of where this traceId should be placed, I always think a bit like this (though this is a bit opinionated):\r\n\r\n1. I use properties for internal stuff (Camel/Platform level)\r\n2. I use headers for message related stuff (integration/user level) for internal and external use. This is data that is also sent to external systems, and is automatically converted based on the component (for example converted by the HTTP component to HTTP headers and then send to an external system/URL).\r\n3. I use variables for message related stuff (integration/user level) for internal use only (not send to external systems)\r\n\r\nSo in this case properties would be make most sense to me, of course properties are on the exchange level, and headers are on the message level (in/out).\r\n\r\nI'm also thinking that it would be nice to have it available on the API (as method). So instead of\r\n\r\nexchange.getProperty({color:#6aab73}\"traceid\"{color});\r\n\r\nIt maybe nice to have something like this:\r\n\r\nexchange.getTraceID();\r\n\r\n\r\n\r\nThough they basically do the same, and the first has the advantage that it doesn't need to be available when there is no trace ID, I always find it a bit hidden. So when it's a property then you need to know about it, while when it's in the API you can just explore the API/JavaDoc.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=skin27", "name": "skin27", "key": "skin27", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Raymond", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-15T22:16:16.146+0000", "updated": "2025-10-15T22:16:16.146+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13630413/comment/18031356", "id": "18031356", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "body": "Thanks for the feedback. We let the user choose. I can add a parameter to make the user decide if they want those params into either an header or a property.\r\n\r\nAs for the higher level API method, no, I don't think it is a wise choice. The design I have in mind is the opposite, I want to remove the non-core concept from the core. A trace is a telemetry concept and it can evolve in time (as it already happened). Through a plugin design we make sure to decouple and let the core have no design concerns around this aspect.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "created": "2025-10-21T08:01:20.725+0000", "updated": "2025-10-21T08:01:20.725+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13630413/comment/18031400", "id": "18031400", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "body": "Done in https://github.com/apache/camel/pull/19645\r\n\r\nThe final solution must include the traces information only on the Exchange Headers as this is the mechanism already used to propagate information.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=squakez", "name": "squakez", "key": "squakez", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=squakez&avatarId=40688", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=squakez&avatarId=40688", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=squakez&avatarId=40688", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=squakez&avatarId=40688"}, "displayName": "Pasquale Congiusti", "active": true, "timeZone": "Europe/Madrid"}, "created": "2025-10-21T10:55:05.438+0000", "updated": "2025-10-21T10:55:05.438+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13630413/comment/18031993", "id": "18031993", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=skin27", "name": "skin27", "key": "skin27", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Raymond", "active": true, "timeZone": "Etc/UTC"}, "body": "Thanks for this change and the clearifications. I will check it when 4.16.0 arrives.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=skin27", "name": "skin27", "key": "skin27", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Raymond", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-22T08:23:58.867+0000", "updated": "2025-10-22T08:23:58.867+0000"}], "maxResults": 6, "total": 6, "startAt": 0}, "customfield_12311820": "0|z1xy7s:", "customfield_12314139": null}}